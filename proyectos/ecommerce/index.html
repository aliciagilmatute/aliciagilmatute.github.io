<!DOCTYPE html>
<html>

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta http-equiv="Accept-CH" content="DPR, Viewport-Width, Width">
<link rel="icon" href=/normal_fav_icon.png type="image/gif">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      media="print" onload="this.media='all'" />
<noscript>
  <link
          href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
          rel="stylesheet">
</noscript>


<link rel="stylesheet" href="/css/font.css" media="all">



<meta property="og:url" content="http://localhost:1313/proyectos/ecommerce/">
  <meta property="og:site_name" content="Alicia Gil Matute">
  <meta property="og:title" content="Análisis de Ventas Ecommerce">
  <meta property="og:description" content="Incremento en las ventas de &#39;SanoyFresco&#39; al crear un recomendador online basado en la técnica &#39;Market Basket Analysis&#39;">
  <meta property="og:locale" content="es">
  <meta property="og:type" content="article">
    <meta property="article:section" content="proyectos">
    <meta property="article:published_time" content="2025-08-12T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-08-12T00:00:00+00:00">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Análisis de Ventas Ecommerce">
  <meta name="twitter:description" content="Incremento en las ventas de &#39;SanoyFresco&#39; al crear un recomendador online basado en la técnica &#39;Market Basket Analysis&#39;">


<link rel="stylesheet" href="/bootstrap-5/css/bootstrap.min.css" media="all"><link rel="stylesheet" href="/css/header.css" media="all">
<link rel="stylesheet" href="/css/footer.css" media="all">


<link rel="stylesheet" href="/css/theme.css" media="all">

<style>
    :root {
        --text-color: #343a40;
        --text-secondary-color: #343a40;
        --text-link-color: #343a40;
        --background-color: #e1f0f6  ;
        --secondary-background-color: #64ffda1a;
        --primary-color: #21A7CC;
        --secondary-color: #FFFFFF;

         
        --text-color-dark: #e4e6eb;
        --text-secondary-color-dark: #b0b3b8;
        --text-link-color-dark: #ffffff;
        --background-color-dark: #18191a;
        --secondary-background-color-dark: #212529;
        --primary-color-dark: #ffffff;
        --secondary-color-dark: #212529;
    }
    body {
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        text-align: left;
    }

    html {
        background-color: var(--background-color) !important;
    }

    body::-webkit-scrollbar {
        height: 0px;
        width: 8px;
        background-color: var(--background-color);
    }

    ::-webkit-scrollbar-track {
        border-radius: 1rem;
    }

    ::-webkit-scrollbar-thumb {
        border-radius: 1rem;
        background: #b0b0b0;
        outline: 1px solid var(--background-color);
    }

    #search-content::-webkit-scrollbar {
        width: .5em;
        height: .1em;
        background-color: var(--background-color);
    }
</style>



<meta name="description" content="Incremento en las ventas de &#39;SanoyFresco&#39; al crear un recomendador online basado en la técnica &#39;Market Basket Analysis&#39;">
<link rel="stylesheet" href="/css/single.css">


<script defer src="/fontawesome-6/all-6.4.2.js"></script>


<style>
  .btn-contact {
    transition: none;
    transition: opacity 0.3s;
    border-radius: .5rem !important;
    border: 1px solid var(--primary-color) !important;
    background-color: var(--secondary-color) !important;
    color: var(--text-color) !important;
    display: inline-block;
    padding: 0.5rem 1rem;
    text-decoration: none;
    font-weight: 500;
  }
  .btn-contact:hover { opacity: 0.7; }
  .btn-contact:focus { box-shadow: none !important; outline: none; }

   
  .copy-btn {
    font-family: "Inter", Arial, sans-serif;
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    padding: 0.025rem 0.6rem;
    font-size: 0.75rem;
    border-radius: 0.5rem;
    background-color: var(--primary-color);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.2);
    cursor: pointer;
    transition: background-color 0.2s;
  }
  .copy-btn:hover { background-color: #5BB8CC; }
  body.dark .copy-btn { background-color: rgba(255,255,255,0.05); color: white; }
  body.dark .copy-btn:hover { background-color: #ccc; }

 
.code-container {
  position: relative;  
}

 
.code-container pre,
.code-container pre code {
  color: black !important;
  background-color: rgba(255,255,255,0.05);
  font-family: monospace;
}

 
.code-container pre code span {
  color: var(--text-color) !important;
  background: none !important;
}

   
  .materiales { text-align: left; margin: 2rem 0 1rem; font-size: 1rem; color: var(--text-color); }
  .materiales strong { display: block; margin-bottom: 0.75rem; }
  .materiales-botones { display: flex; gap: 0.75rem; }
  .materiales-botones a {
    display: inline-flex; align-items: center; justify-content: center;
    width: 48px; height: 48px;
    background-color: var(--primary-color);
    border-radius: 0.5rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    transition: background-color 0.2s ease, transform 0.1s ease;
  }
  .materiales-botones a:hover { background-color: #5BB8CC; transform: translateY(-2px); }
  .materiales-botones svg { width: 24px; height: 24px; fill: white; }
  body.dark .materiales-botones a { background-color: var(--primary-color-dark); }
  body.dark .materiales-botones a:hover { background-color: #ccc; }
  body.dark .materiales-botones svg { fill: var(--background-color-dark); }

   
  .tableau-section { text-align: center; margin: 3rem 0; }
  .tableau-container {
    position: relative;
    width: 100%;
    padding-bottom: 65%;  
    height: 0;
    overflow: hidden;
    border-radius: none;
    box-shadow: none;
  }
  .tableau-container iframe {
    position: absolute;
    top: 0; left: 0;
    width: 150%; height: 150%;
    transform: scale(0.75);  
    transform-origin: top left;
    border: none;
  }
</style>


  
  
    <link rel="stylesheet" href="/style.css">
  

  <title>
Análisis de Ventas Ecommerce | Alicia Gil Matute

  </title>
</head>

<body class="light">
  
  
<script>
    let localStorageValue = localStorage.getItem("pref-theme");
    let mediaQuery = window.matchMedia('(prefers-color-scheme: dark)').matches;

    switch (localStorageValue) {
        case "dark":
            document.body.classList.add('dark');
            break;
        case "light":
            document.body.classList.remove('dark');
            break;
        default:
            if (mediaQuery) {
                document.body.classList.add('dark');
            }
            break;
    }
</script>





<script>
    var prevScrollPos = window.pageYOffset;
    window.addEventListener("scroll", function showHeaderOnScroll() {
        let profileHeaderElem = document.getElementById("profileHeader");
        let currentScrollPos = window.pageYOffset;
        let resetHeaderStyle = false;
        let showNavBarOnScrollUp =  true ;
        let showNavBar = showNavBarOnScrollUp ? prevScrollPos > currentScrollPos : currentScrollPos > 0;
        if (showNavBar) {
            profileHeaderElem.classList.add("showHeaderOnTop");
        } else {
            resetHeaderStyle = true;
        }
        if(currentScrollPos === 0) {
            resetHeaderStyle = true;
        }
        if(resetHeaderStyle) {
            profileHeaderElem.classList.remove("showHeaderOnTop");
        }
        prevScrollPos = currentScrollPos;
    });
</script>



<header id="profileHeader">
    <nav class="pt-3 navbar navbar-expand-lg animate">
        <div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5">
            
            <a class="navbar-brand primary-font text-wrap" href="/">
                
                
                
                    <img src="/normal_fav_icon.png" width="30" height="30" class="d-inline-block align-top">
                    Alicia Gil Matute
                
            </a>

            

            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true">
                    <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path>
                </svg>
            </button>

            
            <div class="collapse navbar-collapse text-wrap primary-font" id="navbarContent">
                <ul class="navbar-nav ms-auto text-center">
                    

                    

                    

                    

                    

                    

                    

                    

                    

                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#about" title="">
                            
                            Sobre mí
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/proyectos" title="Mis proyectos">
                            
                            Proyectos
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#experience" title="">
                            
                            Experiencia
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#education" title="">
                            
                            Formación
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/blog" title="Blog posts">
                            
                            Blog
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/recursos" title="Recursos de psicología y metodología">
                            
                            Recursos
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/fotos" title="Fotos">
                            
                            Fotos
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#contact" title="">
                            
                            Contacto
                        </a>
                    </li>
                    
                    

                    
                    <li class="nav-item navbar-text">
                        
                        <div class="text-center">
                            <button id="theme-toggle">
                                <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                </svg>
                                <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="5"></circle>
                                    <line x1="12" y1="1" x2="12" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="23"></line>
                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                    <line x1="1" y1="12" x2="3" y2="12"></line>
                                    <line x1="21" y1="12" x2="23" y2="12"></line>
                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                </svg>
                            </button>
                        </div>
                    </li>
                    

                </ul>
            </div>
        </div>
    </nav>
</header>
<div id="content">
<section id="single">
  <div class="container">
    <div class="row justify-content-center">
      
      <div class="col-sm-12 col-md-12 col-lg-9">
        <div class="pr-lg-4">
          
          

          
          <div class="title mb-5">
            <h1 class="project-title text-center mb-4">Análisis de Ventas Ecommerce</h1>
            <div class="text-center">
              
              Aug 12, 2025
              
              
              
            </div>
          </div>

          
          
            <p class="project-description text-center">Incremento en las ventas de &#39;SanoyFresco&#39; al crear un recomendador online basado en la técnica &#39;Market Basket Analysis&#39;</p>
            
          

          
          <div class="text-center mb-3">
            
          </div>
          
          
          <div class="materiales">
            <strong>Repositorios:</strong>
            <div class="materiales-botones">
              
                <a href="https://github.com/arrobarsandias/tu_repositorio" target="_blank" aria-label="GitHub">
                  <svg role="img" viewBox="0 0 24 24">
                    <path d="M12 .297c-6.63 0-12 5.373-12 12 
                             0 5.303 3.438 9.8 8.205 11.387
                             .6.113.82-.258.82-.577
                             0-.285-.01-1.04-.015-2.04
                             -3.338.724-4.042-1.61-4.042-1.61
                             -.546-1.387-1.333-1.757-1.333-1.757
                             -1.09-.745.083-.729.083-.729
                             1.205.084 1.84 1.237 1.84 1.237
                             1.07 1.835 2.807 1.304 3.492.997
                             .108-.775.418-1.305.762-1.605
                             -2.665-.3-5.466-1.332-5.466-5.93
                             0-1.31.467-2.38 1.235-3.22
                             -.123-.303-.535-1.523.117-3.176
                             0 0 1.008-.322 3.301 1.23
                             a11.5 11.5 0 0 1 3.003-.404
                             11.48 11.48 0 0 1 3.003.404
                             c2.293-1.552 3.3-1.23 3.3-1.23
                             .653 1.653.241 2.873.118 3.176
                             .77.84 1.233 1.91 1.233 3.22
                             0 4.61-2.803 5.628-5.475 5.922
                             .43.372.823 1.102.823 2.222
                             0 1.606-.014 2.898-.014 3.293
                             0 .319.218.694.825.576
                             C20.565 22.092 24 17.592 24 12.297
                             c0-6.627-5.373-12-12-12"/>
                  </svg>
                </a>
              

              
                <a href="https://www.kaggle.com/code/arrobarsandias/" target="_blank" aria-label="Kaggle">
                  <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18.825 23.859c-.022.092-.117.141-.281.141h-3.139
                             c-.187 0-.351-.082-.492-.248l-5.178-6.589-1.448 1.374v5.111
                             c0 .235-.117.352-.351.352H5.505
                             c-.236 0-.354-.117-.354-.352V.353
                             c0-.233.118-.353.354-.353h2.431
                             c.234 0 .351.12.351.353v14.343l6.203-6.272
                             c.165-.165.33-.246.495-.246h3.239
                             c.144 0 .236.06.285.18.046.149.034.255-.036.315
                             l-6.555 6.344 6.836 8.507c.095.104.117.208.07.358"/>
                  </svg>
                </a>
              
            </div>
          </div>



          
          <article class="page-content p- project-content">
            <p><br><br></p>
<p>El trabajo de un Data Scientist en el mundo del Business Intelligence se podría resumir en 3 grandes grupos de tareas:</p>
<ul>
<li><strong>Generación de Insights</strong>: analizar los datos para encontrar resultados y conclusiones que puedan tener impacto en el negocio de la empresa.</li>
<li><strong>Creación de Informes, cuadros de mando y Dashboards</strong>: permiten organizar la información relevante para la empresa, estructurándola, analizándola y presentándola en forma de resultados visualmente atractivos y fácilmente entendibles por los usuarios de negocio.</li>
<li><strong>Proyectos Ad hoc</strong>: problemas concretos que preocupan en un momento dado y que pueden ser resueltos mediante análisis de datos.</li>
</ul>
<p>Este proyecto contiene casos de los 3 tipos de tareas típicas de un Data Scientist con diferentes herramientas: SQL, PowerBI, Python.
<br><br></p>
<div style="display:flex; justify-content:center; gap:30px; align-items:flex-start;">
  <figure style="margin:0; width:500px; text-align:center;">
    <img src="/ecommerce_hoja1.png" alt="Dashboard de Ventas del Último Año" width="800" height="280">
    <figcaption style="font-style:italic; margin-top:8px;">
      Dashboard de Ventas del Último Año
    </figcaption>
  </figure>
  <figure style="margin:0; width:500px; text-align:center;">
    <img src="/ecommerce_hoja2.png" alt="Aplicación del Algoritmo del recomendador (Market Basket Analysis)" width="800" height="280">
    <figcaption style="font-style:italic; margin-top:8px;">
      Aplicación del Algoritmo del recomendador (Market Basket Analysis)
    </figcaption>
  </figure>
</div>
<br><br>
<h2 id="contexto">Contexto</h2>
<p>Trabajamos para una Ecommerce que vende productos frescos y saludables. Es una startup llamada ‘SanoyFresco’ que estaba creciendo mucho, pero por algún motivo en el último año ha empezado a perder muchas ventas. Y por eso han decidido invertir en contratar a analistas de datos para empezar a tomar las decisiones de una manera más profesional basándose en datos.</p>
<p>Lo primero que vas a hacer es analizar datos para entender cómo está la situación de las ventas. Es algo que el director general suele pedir para presentarlo en el Consejo de Administración.</p>
<p>Después vas a crear un cuadro de mando para solucionar el primer problema urgente de la empresa que es la falta de una fuente de información única. Cada director de cada departamento lleva a las reuniones sus propios datos y al final es imposible ponerse de acuerdo y tomar decisiones basándose en datos. Pondremos orden en toda esta información y crearemos la fuente única de la verdad en cuanto a datos que será utilizada en la empresa a partir de ahora.</p>
<p>Tras ello nos piden que ayudemos en la parte de intentar remontar las ventas. Y para ello vamos a crear un algoritmo en Python que analice el histórico de las compras y localice patrones consistentes en los datos que nos permiten incrementar las futuras ventas. Del estilo de: ‘si el cliente ha comprado esto, entonces también tiene muy alta probabilidad de estar interesado en esto otro’, y por lo tanto se lo vamos a recomendar en el recomendador de la página del Ecommerce. Esto va a ayudar a aumentar el ‘Ticket Medio de Compra’.</p>
<p>Y, por último, le daremos al usuario de negocio una interfaz gráfica y amigable con la que interactuar con el algoritmo que has construido. El usuario de negocio no conoce Python y no va a saber trabajar a partir del código que tú escribas, así que crearemos una especie de aplicación en PowerBI para que él pueda acceder a esas reglas, a esos patrones, identificados por el algoritmo de una manera totalmente visual y no técnica.</p>
<p><br><br></p>
<h2 id="1-generación-de-insights-con-sql">1. Generación de Insights con SQL</h2>
<br>
<h3 id="objetivos">Objetivos</h3>
<p>Generar Insights del negocio para presentar en el Consejo de Administración
<br><br></p>
<h3 id="instrucciones">Instrucciones</h3>
<p>Lo haremos directamente contra la base de datos, sin extraer información dado que solo necesitamos unos datos puntuales. Usaremos SQL y son consultas muy sencillas.</p>
<p>Utilizaremos el <em>framework</em> de la pirámide que nos sirva como guía para decidir qué preguntas, es decir qué consultas, queremos extraer de la base de datos. Son mapas de ruta muy útiles que nos permiten separar el grano de la paja ante tanto dato para dar respuesta a lo que nos interesa saber.</p>
<br>
<div style="display:flex; justify-content:center; gap:30px; align-items:center;">
  <figure style="margin:0; width:360px; text-align:center;">
    <img src="/piramide_framework.png" alt="Framework de la Pirámide" width="360">
    <figcaption style="font-style:italic; margin-top:8px;">
      Figura 1. Framework de la Pirámide.
    </figcaption>
  </figure>
</div>
<br><br>
<h3 id="diseño-analítico">Diseño Analítico</h3>
<p>Para realizar un análisis integral del negocio es importante seguir un enfoque estructurado que vaya de lo general a lo específico. Comenzaremos con una visión general de las ventas totales, luego analizaremos la tendencia de las mismas, profundizaremos en los productos y finalmente examinaremos el comportamiento de los clientes y de los pedidos.</p>
<p>Daremos respuesta acerca de la situación de las &lsquo;Ventas y tendencia&rsquo;, los &lsquo;Productos y secciones&rsquo; y los &lsquo;Clientes y pedidos&rsquo; mediante las siguientes preguntas:
<br><br></p>
<p>Pregunta 0: ¿Qué datos contiene la tabla a analizar?</p>
<p><strong>VENTAS Y TENDENCIA</strong></p>
<p>Pregunta 1: ¿Cuál es el ingreso total generado por el negocio?</p>
<p>Pregunta 2: ¿Cómo ha sido la tendencia de ingresos mensuales?</p>
<p><strong>PRODUCTOS Y SECCIONES</strong></p>
<p>Pregunta 3: ¿Cuál es el rendimiento de cada departamento en términos de ventas?</p>
<p>Pregunta 4: ¿Cómo se distribuyen las ventas entre las diferentes secciones?</p>
<p>Pregunta 5: ¿Cuáles son los 10 productos más vendidos en cantidad?</p>
<p>Pregunta 6: ¿Qué 10 productos generan más ingresos?</p>
<p><strong>CLIENTES Y PEDIDOS</strong></p>
<p>Pregunta 7: ¿Quiénes son los 20 clientes que más compran en términos de ingresos?</p>
<p>Pregunta 8: ¿Cuál es la compra media por cliente?</p>
<p>Pregunta 9: ¿Cuántos pedidos totales se han realizado?</p>
<p>Pregunta 10: ¿Cuál es el valor promedio por pedido?</p>
<p><br><br></p>
<h3 id="desarrollo">Desarrollo</h3>
<p>Y con estas consultas SQL damos respuesta a esas preguntas:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- 0 PREGUNTA
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> tickets <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">--1 PREGUNTA
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">SUM</span>(precio_total) <span style="color:#66d9ef">AS</span> ingreso_total <span style="color:#66d9ef">FROM</span> tickets;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 2 PREGUNTA
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> strftime(<span style="color:#e6db74">&#39;%Y-%m&#39;</span>, fecha) <span style="color:#66d9ef">AS</span> mes, <span style="color:#66d9ef">SUM</span> (precio_total) <span style="color:#66d9ef">AS</span> ingreso_meansual 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> tickets
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> mes
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> mes;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 3 PREGUNTA
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> id_departamento, <span style="color:#66d9ef">SUM</span>(precio_total) <span style="color:#66d9ef">AS</span> ventas_departamento <span style="color:#66d9ef">FROM</span> tickets 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> id_departamento
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> ventas_departamento <span style="color:#66d9ef">DESC</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 4 PREGUNTA
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> id_seccion, <span style="color:#66d9ef">SUM</span>(precio_total) <span style="color:#66d9ef">AS</span> ventas_seccion <span style="color:#66d9ef">FROM</span> tickets
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> id_seccion
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> ventas_seccion <span style="color:#66d9ef">DESC</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 5 PREGUNTA 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> nombre_producto, <span style="color:#66d9ef">SUM</span>(cantidad) <span style="color:#66d9ef">AS</span> top10_cantidad <span style="color:#66d9ef">FROM</span> tickets
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> nombre_producto
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> top10_cantidad <span style="color:#66d9ef">DESC</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">10</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 6 PREGUNTA
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> nombre_producto, <span style="color:#66d9ef">SUM</span>(precio_total) <span style="color:#66d9ef">AS</span> top10_ingresos <span style="color:#66d9ef">FROM</span> tickets
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> nombre_producto
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> top10_ingresos <span style="color:#66d9ef">DESC</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">10</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 7 PREGUNTA
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> id_cliente, <span style="color:#66d9ef">SUM</span>(precio_total) <span style="color:#66d9ef">AS</span> top20_clientes <span style="color:#66d9ef">FROM</span> tickets
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> id_cliente
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> top20_clientes <span style="color:#66d9ef">DESC</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">20</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 8 PREGUNTA
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">AVG</span> (compra_total_cliente) <span style="color:#66d9ef">AS</span> compra_media_cliente
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span>(<span style="color:#66d9ef">SELECT</span> id_cliente, <span style="color:#66d9ef">SUM</span>(precio_total) <span style="color:#66d9ef">AS</span> compra_total_cliente 
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">FROM</span> tickets
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> id_cliente) subconsulta;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 9 PREGUNTA
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">COUNT</span>(<span style="color:#66d9ef">DISTINCT</span> (id_pedido)) <span style="color:#66d9ef">AS</span> total_pedidos <span style="color:#66d9ef">from</span> tickets;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 10 PREGUNTA
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">AVG</span> (precio_total_pedido) <span style="color:#66d9ef">AS</span> media_pedido
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span>(<span style="color:#66d9ef">SELECT</span> id_pedido, <span style="color:#66d9ef">SUM</span>(precio_total) <span style="color:#66d9ef">AS</span> precio_total_pedido 
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">from</span> tickets
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> id_pedido)subconsulta;
</span></span></code></pre></div><!-- resultados jupyer-book?? -->
<p><br><br></p>
<h3 id="conclusiones">Conclusiones</h3>
<ul>
<li>La disminución de las ventas se debe a la pérdida de clientes. Pero los clientes que se quedan compran más.</li>
<li>Aumento del ticket medio por cliente y por pedido.</li>
</ul>
<!-- - *Informe* -->
<br>
<blockquote>
<p>💡 <strong>TIP</strong></p>
<p>El trabajo del analista de datos sigue la estrategia:
Análisis de datos → Evidencias → Insights</p>
<p>Sin embargo, al comunicar los resultados a personal no especializado, el <em>framework</em> de la pirámide recomienda presentarlo en orden inverso:
Insights → Evidencias → Análisis de datos</p>
</blockquote>
<hr>
<br>
<h2 id="2-creando-un-algoritmo-con-python">2. Creando un Algoritmo con Python</h2>
<br>
<h3 id="objetivos-1">Objetivos</h3>
<p>A largo plazo: trabajar en la adquisición y fidelización de clientes.</p>
<p>A corto plazo: incrementar las ventas.</p>
<br>
<h3 id="instrucciones-1">Instrucciones</h3>
<p>Crear un algoritmo de Python que permita vender más productos en cada transacción. El algoritmo estará basado en la técnica <em>‘Market Basket Analysis’</em>.</p>
<br>
<h3 id="diseño-analítico-1">Diseño Analítico</h3>
<p><em>‘Market Basket Analysis’</em>: metodología muy usada en todo tipo de empresas para hacer recomendaciones personalizadas a cada usuario en base a lo que ya ha comprado o en lo que tiene interés.</p>
<p>Conceptos clave:</p>
<ul>
<li><strong>Antecedente (A)</strong>: el “si…”. Conjunto de ítems en el lado izquierdo de la regla. Ej.: A = {manzana}.<br></li>
<li><strong>Consecuente (B)</strong>: el “entonces…”. Conjunto de ítems en el lado derecho. Ej.: B = {plátano}.<br><br></li>
<li><strong>Soporte</strong>: qué probabilidad hay de que manzana y plátano aparezcan juntos en una transacción. Así que simplemente dividimos la frecuencia por el número de todas las transacciones.<br><br></li>
<li><strong>Confianza</strong>: probabilidad de ver B dado que aparece A. En nuestro ejemplo esto significa: ¿Qué probabilidad hay de que, si la manzana está en la cesta, entonces plátano también lo esté? Podemos calcularlo dividiendo la frecuencia de la manzana y el plátano por la frecuencia de la manzana.<br><br></li>
<li><strong>Lift</strong>: el lift indica la intensidad por el cual la probabilidad de comprar los productos consecuentes aumenta si los productos antecedentes ya han sido comprados. Así, en nuestro ejemplo, si el producto manzana está en la cesta de la compra, es 1.27 veces más probable que se compre plátano que si el producto manzana no está en la cesta.<br><br></li>
</ul>
<p>Más información sobre la técnica <em>‘Market Basket Analysis’</em>:</p>
<ul>
<li><a href="https://datatab.es/tutorial/market-basket-analysis">https://datatab.es/tutorial/market-basket-analysis</a></li>
<li><a href="https://iasolver.es/todo-sobre-el-market-basket-analysis-y-su-utilidad-en-el-sector-minorista-y-retail">https://iasolver.es/todo-sobre-el-market-basket-analysis-y-su-utilidad-en-el-sector-minorista-y-retail</a></li>
</ul>
<p><br><br></p>
<h3 id="desarrollo-1">Desarrollo</h3>
<p>A continuación, vamos a aplicar la lógica explicada del <em>&lsquo;Market Basker Analysis&rsquo;</em> en el siguiente código de Python usando la base de datos con la que hemos hecho las consultas SQL:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> sqlite3
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>conexion<span style="color:#f92672">=</span>sqlite3<span style="color:#f92672">.</span>connect(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;C:\Users\alici\Desktop\Programación\Data4Business\Experiencia Junior\sanoyfresco.db&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>read_sql_query(<span style="color:#e6db74">&#34;SELECT * FROM tickets&#34;</span>,conexion)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>conexion<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>info()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;fecha&#39;</span>]<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>to_datetime(df[<span style="color:#e6db74">&#39;fecha&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_cesta<span style="color:#f92672">=</span>df[[<span style="color:#e6db74">&#39;id_pedido&#39;</span>,<span style="color:#e6db74">&#39;nombre_producto&#39;</span>]]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_cesta<span style="color:#f92672">.</span>head()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Agrupar los productos por id_pedido e incluir en una misma celda el nombre de todos los productos del pedido</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_agrupado<span style="color:#f92672">=</span>df_cesta<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;id_pedido&#39;</span>)[<span style="color:#e6db74">&#39;nombre_producto&#39;</span>]<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> producto: <span style="color:#e6db74">&#39;,&#39;</span><span style="color:#f92672">.</span>join(producto))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_agrupado<span style="color:#f92672">.</span>head()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Aplicar pd.get_dummies() para transformar los productos en columnas con 0/1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_transacciones<span style="color:#f92672">=</span>df_agrupado<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>get_dummies(sep<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;,&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_transacciones<span style="color:#f92672">.</span>head()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#**IMPORTANTE** Recordemos que vamos a calcular el soporte individual del antecedente lo cual se define como la suma de las veces que se ha comprado el producto entre el total de los pedidos. Pero al haber convertido los datos en dummies (1/0), la suma de los 1 se corresponde con la media (truco matemático). Con lo cual, pasamos directamente a calcular la media.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>soporte<span style="color:#f92672">=</span>df_transacciones<span style="color:#f92672">.</span>mean()<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>soporte<span style="color:#f92672">.</span>sort_values(ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Función para calcular la confianza entre dos productos en la muestra</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">confianza</span>(antecedente, consecuente):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Casos donde se compraron ambos productos</span>
</span></span><span style="display:flex;"><span>    conjunto_ac <span style="color:#f92672">=</span> df_transacciones[(df_transacciones[antecedente] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">&amp;</span>
</span></span><span style="display:flex;"><span>                                   (df_transacciones[consecuente] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>)]
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Confianza = compras conjuntas / compras de producto A</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> len(conjunto_ac) <span style="color:#f92672">/</span> df_transacciones[antecedente]<span style="color:#f92672">.</span>sum()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Función para calcular el lift entre dos productos en la muestra</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">lift</span>(antecedente, consecuente):
</span></span><span style="display:flex;"><span>    soporte_a <span style="color:#f92672">=</span> df_transacciones[antecedente]<span style="color:#f92672">.</span>mean()
</span></span><span style="display:flex;"><span>    soporte_c <span style="color:#f92672">=</span> df_transacciones[consecuente]<span style="color:#f92672">.</span>mean()
</span></span><span style="display:flex;"><span>    conteo_ac <span style="color:#f92672">=</span> len(df_transacciones[(df_transacciones[antecedente] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">&amp;</span>
</span></span><span style="display:flex;"><span>                                   (df_transacciones[consecuente] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>)])
</span></span><span style="display:flex;"><span>    soporte_ac <span style="color:#f92672">=</span> conteo_ac <span style="color:#f92672">/</span> len(df_transacciones)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> soporte_ac <span style="color:#f92672">/</span> (soporte_a <span style="color:#f92672">*</span> soporte_c)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> itertools <span style="color:#f92672">import</span> combinations
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Definir un umbral para la confianza mínima</span>
</span></span><span style="display:flex;"><span>umbral_confianza <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.05</span>
</span></span><span style="display:flex;"><span>asociaciones <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generar combinaciones de productos y calcular confianza y lift</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> antecedente, consecuente <span style="color:#f92672">in</span> combinations(df_transacciones<span style="color:#f92672">.</span>columns, <span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Soporte del antecedente</span>
</span></span><span style="display:flex;"><span>    soporte_a <span style="color:#f92672">=</span> df_transacciones[antecedente]<span style="color:#f92672">.</span>mean()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Calcular confianza</span>
</span></span><span style="display:flex;"><span>    conf <span style="color:#f92672">=</span> confianza(antecedente, consecuente)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> conf <span style="color:#f92672">&gt;</span> umbral_confianza:
</span></span><span style="display:flex;"><span>        asociaciones<span style="color:#f92672">.</span>append({
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;antecedente&#39;</span>: antecedente,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;consecuente&#39;</span>: consecuente,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;soporte_a&#39;</span>: round(soporte_a <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span>,<span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;confianza&#39;</span>: round(conf <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span>,<span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;lift&#39;</span>: round(lift(antecedente, consecuente),<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Convertir las asociaciones en un DataFrame</span>
</span></span><span style="display:flex;"><span>df_asociaciones <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(asociaciones)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Ordenar las asociaciones por confianza de mayor a menor</span>
</span></span><span style="display:flex;"><span>df_asociaciones<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lift&#39;</span>, ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>, inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_asociaciones
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># El bucle ha generado 399 reglas (399 combinaciones). Ahora le toca decidir al usuario cliente cuales son las reglas que nos merece la pena poner nuestros esfuerzos en base al lift: todas aquellas que contengan un lift superior a 1, a 1.5, a 2, etc...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generamos una tabla de los productos únicos con su &#39;id_producto&#39;, &#39;id_seccion&#39;, &#39;id_departamento&#39; para enriquecer la tabla de reglas</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>productos_unicos<span style="color:#f92672">=</span>df[[<span style="color:#e6db74">&#39;id_producto&#39;</span>,<span style="color:#e6db74">&#39;id_seccion&#39;</span>,<span style="color:#e6db74">&#39;id_departamento&#39;</span>,<span style="color:#e6db74">&#39;nombre_producto&#39;</span>]]<span style="color:#f92672">.</span>drop_duplicates()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>productos_unicos<span style="color:#f92672">.</span>head()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Unimos la tabla del algortimo con la tabla de los productos unicos</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_asociaciones_enriquecido<span style="color:#f92672">=</span>df_asociaciones<span style="color:#f92672">.</span>merge(productos_unicos,left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;antecedente&#39;</span>,right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;nombre_producto&#39;</span>,how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)<span style="color:#f92672">.</span>drop(columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;nombre_producto&#39;</span>])
</span></span><span style="display:flex;"><span>df_asociaciones_enriquecido<span style="color:#f92672">.</span>columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;antecedente&#39;</span>,<span style="color:#e6db74">&#39;consecuente&#39;</span>,<span style="color:#e6db74">&#39;soporte_a&#39;</span>,<span style="color:#e6db74">&#39;confianza&#39;</span>,<span style="color:#e6db74">&#39;lift&#39;</span>,<span style="color:#e6db74">&#39;id_producto_a&#39;</span>,<span style="color:#e6db74">&#39;id_seccion_a&#39;</span>,<span style="color:#e6db74">&#39;id_departamento_a&#39;</span>]
</span></span><span style="display:flex;"><span>df_asociaciones_enriquecido<span style="color:#f92672">.</span>head()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_asociaciones_enriquecido<span style="color:#f92672">.</span>to_csv(<span style="color:#e6db74">&#39;reglas.csv&#39;</span>, index<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>, sep<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;;&#39;</span>, decimal<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;,&#39;</span>)
</span></span></code></pre></div><p><br><br></p>
<h3 id="conclusiones-1">Conclusiones</h3>
<!-- *umbral del lift?: reglas* -->
<p>Con estas reglas entramos en la fase del trabajo donde debemos colaborar con otros departamentos de la empresa para explotar las reglas generadas. Ejemplos:</p>
<p><strong>Departamento IT</strong>: podemos pasarle estas reglas directamente al departamento de informática para que las implementen en el recomendador de la página web.
<br></p>
<p><strong>Departamento Marketing/Negocio</strong>:</p>
<ul>
<li>Implementar las reglas no solo en el recomendador del producto concreto, también en el checkout de compra.<br><br></li>
<li>Usar el historial de compras de los clientes y meter esos productos como input en nuestra tabla de reglas, con la intención de ofrecer directamente al cliente los productos del output a través de newsletter/email personalizado.<br><br></li>
<li>Se podrían desarrollar nuevos productos: cestas y packs siguiendo las reglas con los productos que se compran frecuentemente juntos. Así a lo mejor, el cliente en vez de gastarse 5 euros en el producto individual decide optar por una cesta de 15 euros donde aparezca ese producto y otros, aumentando así el Ticket Medio de Compra. <br><br></li>
<li>Las reglas también permiten la generación de cupones personalizados por cliente. No tiene sentido enviar a todos los clientes los mismos cupones con las mismas ofertas cuando tenemos información sobre el historial de compra de cada cliente. <br></li>
<li>Etc.</li>
</ul>
<p><br><br></p>
<h2 id="3-creación-de-cuadros-de-mando-con-powerbi">3. Creación de Cuadros de Mando con PowerBI</h2>
<br>
<h3 id="objetivos-2">Objetivos</h3>
<p>El dashboard se comprondrá de dos hojas: en la primera hoja se incluirán gráficos y paneles que muestren la información relevante de las ventas en el último año, la fuente única de los datos; en la segunda hoja se incluirá la aplicación de <em>‘Market Basket Analysis’</em> de nuestro algoritmo en Python.</p>
<p><u>Hoja 1</u>:
Creación de la fuente única de los datos sobre las ventas para tomar acciones sobre ellos y que será común a todos los departamentos. Realizarlo en una herramienta profesional, como PowerBI.</p>
<p><u>Hoja 2</u>:
Crear un dashboard a modo de aplicación que contenga las reglas obtenidas con nuestro algoritmo de Python, y mediante filtros poder identificar los componentes de la técnica de <em>‘Market Basket Analysis’</em> (confianza, lift, antecedente, etc.) para cada sección y productos.
<br><br></p>
<h3 id="instrucciones-2">Instrucciones</h3>
<p><strong>Hoja 1 y Hoja 2</strong>: Documento de Requerimientos Funcionales del Negocio.
<br><br></p>
<h3 id="diseño-analítico-2">Diseño Analítico</h3>
<p><em>Mockup</em>: a gusto personal siempre que contenga los contenidos exigidos en el documento de Requerimientos (se ofrece una versión en el Documento de Requerimientos).
<br><br></p>
<h3 id="desarrollo-2">Desarrollo</h3>
<div style="text-align: center; margin: 2rem 0;">
  <!-- Enlace al dashboard con estilo de botón -->
  <iframe title="desarrollo" width="900" height="600" src="https://app.powerbi.com/view?r=eyJrIjoiODQ4MWZkNTEtZmZlYi00MWNmLThlNzEtNWYwYTMwNmYzNzkxIiwidCI6ImZjNjYwMmVmLThlODgtNGYxZC1hMjA2LWUxNGEzYmMxOWFmMiIsImMiOjh9" frameborder="0" allowFullScreen="true"></iframe>
  <p><br>
    <a href="https://app.powerbi.com/view?r=eyJrIjoiODQ4MWZkNTEtZmZlYi00MWNmLThlNzEtNWYwYTMwNmYzNzkxIiwidCI6ImZjNjYwMmVmLThlODgtNGYxZC1hMjA2LWUxNGEzYmMxOWFmMiIsImMiOjh9" 
       target="_blank" class="btn-contact">
       Ver Dashboard
    </a>
  </p>
</div>
<h3 id="conclusiones-2">Conclusiones</h3>
<p><br><br></p>

          </article>

          
          

          
          <div class="text-center mt-4">
            <a href="/proyectos" class="btn-contact">Volver a Proyectos</a>
          </div>
        </div>
      </div>

      
      <div class="col-sm-12 col-md-12 col-lg-3">
        <div id="stickySideBar" class="sticky-sidebar">
          
          <aside class="toc">
              <h5>Tabla de Contenidos</h5>
              <div class="toc-content"><nav id="TableOfContents">
  <ul>
    <li><a href="#contexto">Contexto</a></li>
    <li><a href="#1-generación-de-insights-con-sql">1. Generación de Insights con SQL</a>
      <ul>
        <li><a href="#objetivos">Objetivos</a></li>
        <li><a href="#instrucciones">Instrucciones</a></li>
        <li><a href="#diseño-analítico">Diseño Analítico</a></li>
        <li><a href="#desarrollo">Desarrollo</a></li>
        <li><a href="#conclusiones">Conclusiones</a></li>
      </ul>
    </li>
    <li><a href="#2-creando-un-algoritmo-con-python">2. Creando un Algoritmo con Python</a>
      <ul>
        <li><a href="#objetivos-1">Objetivos</a></li>
        <li><a href="#instrucciones-1">Instrucciones</a></li>
        <li><a href="#diseño-analítico-1">Diseño Analítico</a></li>
        <li><a href="#desarrollo-1">Desarrollo</a></li>
        <li><a href="#conclusiones-1">Conclusiones</a></li>
      </ul>
    </li>
    <li><a href="#3-creación-de-cuadros-de-mando-con-powerbi">3. Creación de Cuadros de Mando con PowerBI</a>
      <ul>
        <li><a href="#objetivos-2">Objetivos</a></li>
        <li><a href="#instrucciones-2">Instrucciones</a></li>
        <li><a href="#diseño-analítico-2">Diseño Analítico</a></li>
        <li><a href="#desarrollo-2">Desarrollo</a></li>
        <li><a href="#conclusiones-2">Conclusiones</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
          </aside>
          

          

          
          <aside class="social">
            <h5>Social</h5>
            <div class="social-content">
              <ul class="list-inline">
                <li class="list-inline-item text-center"><a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2flocalhost%3a1313%2fproyectos%2fecommerce%2f"><i class="fab fa-linkedin"></i></a></li>
                <li class="list-inline-item text-center"><a target="_blank" href="https://twitter.com/share?text=An%c3%a1lisis%20de%20Ventas%20Ecommerce&url=http%3a%2f%2flocalhost%3a1313%2fproyectos%2fecommerce%2f"><i class="fab fa-twitter"></i></a></li>
                <li class="list-inline-item text-center"><a target="_blank" href="https://api.whatsapp.com/send?text=An%c3%a1lisis%20de%20Ventas%20Ecommerce: http%3a%2f%2flocalhost%3a1313%2fproyectos%2fecommerce%2f"><i class="fab fa-whatsapp"></i></a></li>
                <li class="list-inline-item text-center"><a target="_blank" href='mailto:?subject=An%c3%a1lisis%20de%20Ventas%20Ecommerce&amp;body=Check%20out%20this%20site http%3a%2f%2flocalhost%3a1313%2fproyectos%2fecommerce%2f'><i class="fa fa-envelope"></i></a></li>
              </ul>
            </div>
          </aside>
          
        </div>
      </div>
    </div>

  
  <button class="p-2 px-3" onclick="topFunction()" id="topScroll"><i class="fas fa-angle-up"></i></button>
</section>



<div class="progress"><div id="scroll-progress-bar" class="progress-bar" role="progressbar"></div></div>
<script src="/js/scrollProgressBar.js"></script>



<script>
  var topScroll = document.getElementById("topScroll");
  window.onscroll = function() {scrollFunction()};
  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) { topScroll.style.display = "block"; }
    else { topScroll.style.display = "none"; }
  }
  function topFunction() { document.body.scrollTop = 0; document.documentElement.scrollTop = 0; }

  
  let stickySideBarElem = document.getElementById("stickySideBar");
  let stickyNavBar =  true ;
  if(stickyNavBar) {
    let headerElem = document.getElementById("profileHeader");
    let headerHeight = headerElem.offsetHeight + 15;
    stickySideBarElem.style.top = headerHeight + "px";
  } else {
    stickySideBarElem.style.top = "50px";
  }
</script>



<script src="/js/readingTime.js"></script>



<script>
  document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll("pre > code").forEach((codeBlock) => {
      const pre = codeBlock.parentNode;
      const container = document.createElement("div");
      container.classList.add("code-container");
      pre.parentNode.insertBefore(container, pre);
      container.appendChild(pre);
      const button = document.createElement("button");
      button.className = "copy-btn"; button.textContent = "Copy";
      button.addEventListener("click", () => {
        navigator.clipboard.writeText(codeBlock.innerText).then(() => {
          button.textContent = "Copied!"; setTimeout(() => (button.textContent = "Copy"), 2000);
        });
      });
      container.appendChild(button);
    });
  });
</script>

<footer class="py-4 text-center">
  <p>&copy; 2025 Alicia Gil Matute</p>
</footer>

  </div><footer>
    
 

<div class="text-center pt-2">
    
    <span class="px-1">
        <a href="https://github.com/aliciagilmatute" aria-label="github">
            <svg xmlns="http://www.w3.org/2000/svg" width="2.7em" height="2.7em" viewBox="0 0 1792 1792">
                <path id="footer-socialNetworks-github-svg-path"
                    d="M522 1352q-8 9-20-3-13-11-4-19 8-9 20 3 12 11 4 19zm-42-61q9 12 0 19-8 6-17-7t0-18q9-7 17 6zm-61-60q-5 7-13 2-10-5-7-12 3-5 13-2 10 5 7 12zm31 34q-6 7-16-3-9-11-2-16 6-6 16 3 9 11 2 16zm129 112q-4 12-19 6-17-4-13-15t19-7q16 5 13 16zm63 5q0 11-16 11-17 2-17-11 0-11 16-11 17-2 17 11zm58-10q2 10-14 14t-18-8 14-15q16-2 18 9zm964-956v960q0 119-84.5 203.5t-203.5 84.5h-224q-16 0-24.5-1t-19.5-5-16-14.5-5-27.5v-239q0-97-52-142 57-6 102.5-18t94-39 81-66.5 53-105 20.5-150.5q0-121-79-206 37-91-8-204-28-9-81 11t-92 44l-38 24q-93-26-192-26t-192 26q-16-11-42.5-27t-83.5-38.5-86-13.5q-44 113-7 204-79 85-79 206 0 85 20.5 150t52.5 105 80.5 67 94 39 102.5 18q-40 36-49 103-21 10-45 15t-57 5-65.5-21.5-55.5-62.5q-19-32-48.5-52t-49.5-24l-20-3q-21 0-29 4.5t-5 11.5 9 14 13 12l7 5q22 10 43.5 38t31.5 51l10 23q13 38 44 61.5t67 30 69.5 7 55.5-3.5l23-4q0 38 .5 103t.5 68q0 22-11 33.5t-22 13-33 1.5h-224q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z" />

                <metadata>
                    <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                        xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" xmlns:dc="http://purl.org/dc/elements/1.1/">
                        <rdf:Description about="https://iconscout.com/legal#licenses"
                            dc:title="Github, Online, Project, Hosting, Square"
                            dc:description="Github, Online, Project, Hosting, Square" dc:publisher="Iconscout"
                            dc:date="2016-12-14" dc:format="image/svg+xml" dc:language="en">
                            <dc:creator>
                                <rdf:Bag>
                                    <rdf:li>Font Awesome</rdf:li>
                                </rdf:Bag>
                            </dc:creator>
                        </rdf:Description>
                    </rdf:RDF>
                </metadata>
            </svg>
        </a>
    </span>
    

    
    <span class="px-1">
        <a href="https://www.linkedin.com/in/alicia-gil-matute/" aria-label="linkedin">
            <svg xmlns="http://www.w3.org/2000/svg" width='2.4em' height='2.4em' fill="#fff" aria-label="LinkedIn"
                viewBox="0 0 512 512">
                <rect width="512" height="512" fill="#0077b5" rx="15%" />
                <circle cx="142" cy="138" r="37" />
                <path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198" />
                <path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32" />
            </svg>
        </a>
    </span>
    

    
    <a href="https://x.com/arrobarsandias" aria-label="twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48px" height="48px">
            <path fill="#03a9f4"
                d="M42,37c0,2.762-2.239,5-5,5H11c-2.762,0-5-2.238-5-5V11c0-2.762,2.238-5,5-5h26c2.761,0,5,2.238,5,5 V37z" />
            <path fill="#fff"
                d="M36,17.12c-0.882,0.391-1.999,0.758-3,0.88c1.018-0.604,2.633-1.862,3-3 c-0.951,0.559-2.671,1.156-3.793,1.372C31.311,15.422,30.033,15,28.617,15C25.897,15,24,17.305,24,20v2c-4,0-7.9-3.047-10.327-6 c-0.427,0.721-0.667,1.565-0.667,2.457c0,1.819,1.671,3.665,2.994,4.543c-0.807-0.025-2.335-0.641-3-1c0,0.016,0,0.036,0,0.057 c0,2.367,1.661,3.974,3.912,4.422C16.501,26.592,16,27,14.072,27c0.626,1.935,3.773,2.958,5.928,3c-1.686,1.307-4.692,2-7,2 c-0.399,0-0.615,0.022-1-0.023C14.178,33.357,17.22,34,20,34c9.057,0,14-6.918,14-13.37c0-0.212-0.007-0.922-0.018-1.13 C34.95,18.818,35.342,18.104,36,17.12" />
        </svg>
    </a>
    

    

    
</div><div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-4 text-center">
            
                <div class="pb-2">
                    <a href="http://localhost:1313/" title="Alicia Gil Matute">
                        <img alt="Footer logo" src="/normal_fav_icon.png"
                            height="40px" width="40px">
                    </a>
                </div>
            
            &copy; 2025  All rights reserved
            <div class="text-secondary">
                Made with
                <span class="text-danger">
                    &#10084;
                </span>
                and
                <a href="https://github.com/gurusabarish/hugo-profile" target="_blank"
                    title="Designed and developed by gurusabarish">
                    Hugo Profile
                </a>
            </div>
        </div>
    </div>
</div>
</footer><script src="/bootstrap-5/js/bootstrap.bundle.min.js"></script>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })

</script>












  <section id="search-content" class="py-2">
    <div class="container" id="search-results"></div>
  </section>
</body>

</html>
