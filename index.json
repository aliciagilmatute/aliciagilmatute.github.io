[{"content":"\u003c!-- # Emulaci√≥n de una semana de trabajo en DataScientist --\u003e\r\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\nEl gran objetivo del proyecto en el que vas a trabajar es reducir el abandono de empleados de la empresa.\nEl principal problema es la rotaci√≥n de empleados. Deber√°s trabajar en un sistema que consiga reducir la fuga de empleados.\n\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch3 id=\"objetivosbr\"\u003eObjetivos\u003cbr\u003e\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eEntender y cuantificar el problema desde el punto de vista de negocio\u003c/li\u003e\n\u003cli\u003eDesarrollar un sistema automatizado de machine learning que identifique a los empleados que est√°n en mayor riesgo de fuga\u003c/li\u003e\n\u003cli\u003eComunicar los resultados de forma exitosa a la direcci√≥n\n\u003cbr\u003e\u003cbr\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"fasesbr\"\u003eFases\u003cbr\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eBusiness Analytics\u003c/strong\u003e: entender y cuantificar el problema\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMachine Learning\u003c/strong\u003e: desarrollar un modelo predictivo\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVisualizaci√≥n y Comunicaci√≥n\u003c/strong\u003e: generar un cuadro de mando\n\u003cbr\u003e\u003cbr\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- \u003ciframe \r\n    src=\"/jupyter-notebooks-hugo/_build/html/notebooks/fuga_empleados.html\"\r\n    width=\"100%\" height=\"1000\" frameborder=\"0\" scrolling=\"yes\"\u003e\r\n\u003c/iframe\u003e\r\n --\u003e\r\n\u003ch2 id=\"business-analyticsbr\"\u003eBusiness Analytics\u003cbr\u003e\u003c/h2\u003e\n\u003ch3 id=\"carga-de-librer√≠as-y-dataset\"\u003eCarga de librer√≠as y dataset\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e numpy \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e np\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e pandas \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e pd \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e matplotlib.pyplot \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e plt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e os\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eruta \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e os\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epath\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ejoin(os\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003egetcwd())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e pd\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eread_csv(ruta \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003er\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/data/AbandonoEmpleados.csv\u0026#39;\u003c/span\u003e, sep\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;;\u0026#39;\u003c/span\u003e, na_values\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;#N/D\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehead()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003einfo()\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"an√°lisis-de-nulos\"\u003eAn√°lisis de nulos\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eisnull()\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esum()\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esort_values(ascending\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eFalse\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eConclusiones:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eEliminamos columnas con muchos nulos: \u003ccode\u003ea√±os_en_puesto\u003c/code\u003e y \u003ccode\u003econciliacion\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eImputamos valores en \u003ccode\u003esexo\u003c/code\u003e, \u003ccode\u003eeducaci√≥n\u003c/code\u003e, \u003ccode\u003esatisfacci√≥n\u003c/code\u003e e \u003ccode\u003eimplicaci√≥n\u003c/code\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edrop(columns \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;anos_en_puesto\u0026#39;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;conciliacion\u0026#39;\u003c/span\u003e], inplace \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTrue\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;educacion\u0026#39;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;educacion\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efillna(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Universitaria\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;implicacion\u0026#39;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;implicacion\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efillna(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Alta\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;satisfaccion_trabajo\u0026#39;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;satisfaccion_trabajo\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efillna(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Alta\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"variables-num√©ricas\"\u003eVariables num√©ricas\u003c/h3\u003e\n\u003cp\u003eConclusiones:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eEliminamos \u003ccode\u003esexo\u003c/code\u003e, \u003ccode\u003eempleados\u003c/code\u003e, \u003ccode\u003ehoras_quincena\u003c/code\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edrop(columns\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;sexo\u0026#39;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;empleados\u0026#39;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;horas_quincena\u0026#39;\u003c/span\u003e], inplace\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eTrue\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"generaci√≥n-de-insights\"\u003eGeneraci√≥n de insights\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eTasa de abandono\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;abandono\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003evalue_counts(normalize\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eTrue\u003c/span\u003e)\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cstrong\u003eImpacto econ√≥mico\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salario_ano\u0026#39;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salario_mes\u0026#39;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003econdiciones\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e[\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    (df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salario_ano\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e\u0026lt;=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e30000\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    (df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salario_ano\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e30000\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e (df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salario_ano\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e\u0026lt;=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e50000\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    (df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salario_ano\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e50000\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e (df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salario_ano\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e\u0026lt;=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e75000\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    (df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salario_ano\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e75000\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eponderaciones\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e[df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salario_ano\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e0.161\u003c/span\u003e, df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salario_ano\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e0.197\u003c/span\u003e, df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salario_ano\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e0.204\u003c/span\u003e, df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salario_ano\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e0.21\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;impacto_abandono\u0026#39;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e np\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eselect(condiciones, ponderaciones, default\u003cspan style=\"color:#f92672\"\u003e=-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e999\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecoste_total \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eloc[df[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;abandono\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Yes\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eimpacto_abandono\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esum()\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"machine-learning\"\u003eMachine Learning\u003c/h2\u003e\n\u003ch3 id=\"preparaci√≥n-de-datos\"\u003ePreparaci√≥n de datos\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;abandono\u0026#39;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eabandono\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emap({\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;No\u0026#39;\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Yes\u0026#39;\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e})\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e sklearn.preprocessing \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e OneHotEncoder\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf_ml \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecopy()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecat \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df_ml\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eselect_dtypes(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;O\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eohe \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e OneHotEncoder(sparse_output\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eFalse\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eohe\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efit(cat)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecat_ohe \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e pd\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eDataFrame(ohe\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003etransform(cat), columns\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eohe\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget_feature_names_out(cat\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecolumns))\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ereset_index(drop\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eTrue\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enum \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df_ml\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eselect_dtypes(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;number\u0026#39;\u003c/span\u003e)\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ereset_index(drop\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eTrue\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf_ml \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e pd\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003econcat([cat_ohe, num], axis\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"modelos-candidatos\"\u003eModelos candidatos\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e sklearn.model_selection \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e train_test_split, StratifiedKFold, cross_val_score\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e sklearn.linear_model \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e LogisticRegression\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e sklearn.ensemble \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e RandomForestClassifier\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e sklearn.neighbors \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e KNeighborsClassifier\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e sklearn.svm \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e SVC\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eX \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df_ml\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edrop(columns\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;abandono\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ey \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df_ml[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;abandono\u0026#39;\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eX_train, X_test, y_train, y_test \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e train_test_split(X, y, test_size\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e0.3\u003c/span\u003e, random_state\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e42\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emodels \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    (\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;LR\u0026#39;\u003c/span\u003e, LogisticRegression(solver\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;liblinear\u0026#39;\u003c/span\u003e, multi_class\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;ovr\u0026#39;\u003c/span\u003e)),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    (\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;KNN\u0026#39;\u003c/span\u003e, KNeighborsClassifier()),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    (\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;RF\u0026#39;\u003c/span\u003e, RandomForestClassifier()),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    (\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;SVM\u0026#39;\u003c/span\u003e, SVC(gamma\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;auto\u0026#39;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e name, model \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e models:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    kfold \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e StratifiedKFold(n_splits\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e, random_state\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, shuffle\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eTrue\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    cv_results \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e cross_val_score(model, X_train, y_train, cv\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ekfold, scoring\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;accuracy\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(\u003cspan style=\"color:#e6db74\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{\u003c/span\u003ename\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{\u003c/span\u003ecv_results\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emean()\u003cspan style=\"color:#e6db74\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e.4f\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{\u003c/span\u003ecv_results\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003estd()\u003cspan style=\"color:#e6db74\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e.4f\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e)\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"rf-optimizado-mejores-par√°metros\"\u003eRF optimizado: Mejores par√°metros\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e sklearn.model_selection \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e RandomizedSearchCV\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eparam_dist \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;n_estimators\u0026#39;\u003c/span\u003e: [\u003cspan style=\"color:#ae81ff\"\u003e50\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e300\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;max_depth\u0026#39;\u003c/span\u003e: [\u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e30\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;min_samples_split\u0026#39;\u003c/span\u003e: [\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;min_samples_leaf\u0026#39;\u003c/span\u003e: [\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;max_features\u0026#39;\u003c/span\u003e: [\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;sqrt\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;log2\u0026#39;\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erandom_search \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e RandomizedSearchCV(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    estimator\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eRandomForestClassifier(), \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    param_distributions\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eparam_dist,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    n_iter\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e50\u003c/span\u003e, cv\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e, scoring\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;f1_macro\u0026#39;\u003c/span\u003e, verbose\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e, n_jobs\u003cspan style=\"color:#f92672\"\u003e=-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, random_state\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e42\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erandom_search\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efit(X_train, y_train)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprint(random_search\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ebest_params_)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"evaluaci√≥n-rf-optimizado\"\u003eEvaluaci√≥n RF optimizado\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRF \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e RandomForestClassifier(\u003cspan style=\"color:#f92672\"\u003e**\u003c/span\u003erandom_search\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ebest_params_)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRF\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efit(X_train, y_train)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRF_pred \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e RF\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epredict(X_test)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e sklearn.metrics \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e accuracy_score, confusion_matrix, classification_report\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprint(accuracy_score(y_test, RF_pred))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprint(confusion_matrix(y_test, RF_pred))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprint(classification_report(y_test, RF_pred))\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"scoring-de-abandono\"\u003eScoring de abandono\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;scoring_abandono\u0026#39;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e RF\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epredict_proba(df_ml\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edrop(columns\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;abandono\u0026#39;\u003c/span\u003e))[:,\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edf\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esort_values(by\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;scoring_abandono\u0026#39;\u003c/span\u003e, ascending\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eFalse\u003c/span\u003e)\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehead(\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"visualizaci√≥n-y-comunicaci√≥n\"\u003eVisualizaci√≥n y Comunicaci√≥n\u003c/h2\u003e\n\u003cdiv style=\"text-align: center; margin: 2rem 0;\"\u003e\r\n  \u003c!-- Enlace al dashboard con estilo de bot√≥n --\u003e\r\n  \u003cp\u003e\r\n    \u003ca href=\"https://public.tableau.com/app/profile/alicia.gil.matute/viz/DashboardAbandonoEmpleados_17549150031180/Dashboard1\" \r\n       target=\"_blank\" class=\"btn-contact\"\u003e\r\n       Ver Dashboard\r\n    \u003c/a\u003e\r\n  \u003c/p\u003e\r\n\u003c!-- No es necesario porque se gestiona el tama√±o en single.html --\u003e\r\n\u003c!-- Dashboard centrado manualmente\r\n\u003cdiv style=\"text-align: center; margin: 2rem 0;\"\u003e\r\n\u003cdiv style=\"width: 100%; max-width: 1200px; margin: 0 auto;\"\u003e\r\n  \u003ciframe \r\n      src=\"https://public.tableau.com/views/DashboardAbandonoEmpleados_17549150031180/Dashboard1?:showVizHome=no\u0026:embed=true\"\r\n      width=\"100%\" height=\"900\" frameborder=\"0\" scrolling=\"no\" allowfullscreen\r\n      style=\"margin: 0 auto; display: block;\"\u003e\r\n  \u003c/iframe\u003e\r\n\u003c/div\u003e --\u003e","description":"Proyecto de Business Intelligence para predecir el abandono de empleados, medir su impacto econ√≥mico y proponer estrategias de retenci√≥n.","image":null,"permalink":"http://localhost:1313/proyectos/fuga_empleados/","title":"An√°lisis Abandono de Empleados"},{"content":"\u003cp\u003eMi timeline de Twitter (me niego a llamarlo X) es tan diversa que nada de lo humano le es ajeno, pero podr√≠a decirse que, en su mayor√≠a, me muestra cuentas y perfiles relacionados con la estad√≠stica y la investigaci√≥n cient√≠fica. Hace unos d√≠as me encontr√© con el siguiente post:\n\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://x.com/JesslovesMJK/status/1913104932552442287\"\u003e\u003cimg src=\"/grafico.png\" alt=\"Tweet de Jessica Rose\"\u003e\u003c/a\u003e\n\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003eCualquiera que est√© cr√≥nicamente en internet como yo, sabe que si un tweet recibe tantas interacciones es que algo pasa. Y normalmente, ese ‚Äúalgo‚Äù tiene que ver con pol√©mica. Quien est√© familiarizado con la creaci√≥n e interpretaci√≥n de gr√°ficos probablemente haya notado otra cosa en primer lugar: ese n√∫mero enorme en la imagen mostrando una correlaci√≥n alt√≠sima (R = 0.9021).\u003c/p\u003e\n\u003cp\u003eSin embargo, en mi caso, la sorpresa fue a√∫n mayor cuando me fij√© en las variables que se presentan como relacionadas: \u003cstrong\u003e‚ÄúN√∫mero acumulado de dosis de vacunas en el mercado‚Äù vs. ‚ÄúPrevalencia de casos de autismo‚Äù.\u003c/strong\u003e\n\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"agent-cooper-its-happening-again-vacunas-y-autismo\"\u003eAgent Cooper‚Ä¶ it‚Äôs happening again: Vacunas y autismo\u003c/h2\u003e\n\u003cbr\u003e\r\nA lo mejor al lector le suena haber escuchado algo similar a finales del siglo pasado, cuando aparecieron ‚Äúestudios cient√≠ficos‚Äù que afirmaban haber descubierto la causa del autismo: las vacunas. \r\n\u003cbr\u003e\u003cbr\u003e\r\n\u003cp\u003ePor si a alguien todav√≠a le quedaba alguna duda: esa ‚Äúteor√≠a‚Äù ya fue desmentida hace a√±os, el estudio que lo afirmaba fue retractado y su autor qued√≥ desacreditado. Fue un esc√°ndalo enorme en la comunidad cient√≠fica. Pero de eso no vamos a hablar hoy.\u003c/p\u003e\n\u003cp\u003eAun as√≠, ese gr√°fico parece mostrar lo contrario en pleno 2025.\u003c/p\u003e\n\u003cp\u003e¬øPor qu√© parece que puede ser una nueva prueba a favor de que las vacunas s√≠ provocan autismo?, ¬øSe equivoc√≥ la comunidad cient√≠fica en su momento?, ¬øEstamos poniendo en riesgo a nuestros ni√±os?\u003c/p\u003e\n\u003cp\u003eNada de eso. Y quiz√° la menci√≥n a Donald Trump en el tweet sea menos inocente de lo que parece.\u003c/p\u003e\n\u003cp\u003ePero antes de llegar a eso, aclaremos un par de cosas:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eEL AUTISMO NO ES UNA ENFERMEDAD.\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLas correlaciones no implican causalidad, porque existen las correlaciones espurias.\u003c/strong\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003ePara poder entender qu√© es una correlaci√≥n espuria, primero hay que explicar qu√© es una correlaci√≥n.\n\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"correlaci√≥n-seguro-que-no-es-otro-tipo-de-relaci√≥n-abierta\"\u003e¬øCorrelaci√≥n? ¬øSeguro que no es otro tipo de relaci√≥n abierta?\u003c/h2\u003e\n\u003cbr\u003e\r\n\u003cp\u003ePodr√≠a serlo, pero no. Una correlaci√≥n es un √≠ndice matem√°tico que informa sobre la relaci√≥n estad√≠stica entre dos fen√≥menos.\u003c/p\u003e\n\u003cp\u003ePor ejemplo, hay estudios que reportan la existencia de correlaci√≥n entre la puntuaci√≥n en tests de CI y el nivel socioecon√≥mico.\nUna correlaci√≥n puede tomar valores entre -1 y +1, siendo 0 indicativo de ausencia de relaci√≥n. Cuanto m√°s se acerca a -1 o +1, m√°s fuerte es la correlaci√≥n. El signo indica el sentido: una correlaci√≥n negativa significa que la relaci√≥n es inversa, mientras que una positiva indica una relaci√≥n directa.\u003c/p\u003e\n\u003cp\u003eUn ejemplo de correlaci√≥n inversa es el que existe entre el consumo de tabaco y la capacidad respiratoria: a mayor consumo, menor capacidad. En el caso del CI y el nivel socioecon√≥mico, la relaci√≥n suele ser directa: a mayor nivel socioecon√≥mico, mayor probabilidad de tener un CI elevado (o viceversa).\u003c/p\u003e\n\u003cp\u003eEsto es \u003cstrong\u003eIMPORTANTE\u003c/strong\u003e: la correlaci√≥n es bidireccional, la causalidad no. Y aqu√≠ es donde ocurre la magia (o el desastre, depende del caso).\n\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"se-dice-causalidad-no-casualidad\"\u003eSe dice causalidad, no casualidad\u003c/h2\u003e\n\u003cbr\u003e\r\n\u003cp\u003ePara que exista una relaci√≥n de causalidad, el fen√≥meno A (el antecedente) debe provocar el fen√≥meno B (el consecuente). Esta relaci√≥n es unilateral: B no puede causar A.\u003c/p\u003e\n\u003cp\u003eVolviendo al ejemplo, podr√≠amos investigar si un alto CI causa un alto nivel socioecon√≥mico, o si tener un alto nivel socioecon√≥mico causa un CI elevado. Para algunos, la primera hip√≥tesis parece m√°s plausible; para otros, la segunda. Pero la ciencia no puede basarse en intuiciones, debe poner ambas hip√≥tesis a prueba mediante la experimentaci√≥n.\u003c/p\u003e\n\u003cp\u003eAqu√≠ encontramos otra idea clave: las relaciones de causalidad solo pueden estudiarse, inferirse y contrastarse mediante un \u003cstrong\u003edise√±o experimental controlado\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eMientras que la correlaci√≥n puede calcularse directamente con datos, la causalidad requiere manipular el antecedente para observar c√≥mo afecta al consecuente. Esto solo es posible mediante la experimentaci√≥n.\u003c/p\u003e\n\u003cp\u003ePero la experimentaci√≥n tiene sus l√≠mites. Hay fen√≥menos que no se pueden manipular √©ticamente, como es el caso de las lesiones cerebrales. No podemos provocar lesiones en pacientes sanos; solo podemos estudiar a quienes ya las tienen. Y estas lesiones variar√°n mucho entre individuos, lo que complica establecer relaciones causales s√≥lidas. Por eso, en ciencia, es dif√≠cil encontrar estudios que demuestren de forma definitiva una relaci√≥n causal.\u003c/p\u003e\n\u003cp\u003eBien, ya hemos aclarado lo fundamental: correlaci√≥n no es causalidad. Pero, entonces, ¬øqu√© son las correlaciones espurias?\n\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"la-estad√≠stica-m√°s-castiza-que-la-violetera\"\u003eLa estad√≠stica, m√°s castiza que la Violetera\u003c/h2\u003e\n\u003cbr\u003e\r\n\u003ch4 id=\"qu√©-tiene-que-ver-el-tocino-con-la-velocidad\"\u003e\u003cem\u003e‚Äú¬øQu√© tiene que ver el tocino con la velocidad?‚Äù\u003c/em\u003e\u003c/h4\u003e\n\u003cp\u003eEs, sin duda, una de las frases m√°s castizas y tambi√©n la m√°s adecuada para explicar qu√© es una correlaci√≥n espuria. Esta expresi√≥n la usamos para evidenciar lo absurda que puede ser la relaci√≥n que alguien establece entre dos fen√≥menos que, en realidad, no tienen nada que ver.\u003c/p\u003e\n\u003cp\u003ePero si codific√°ramos esa frase en un Excel y calcul√°ramos una correlaci√≥n, podr√≠an pasar dos cosas:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eLa relaci√≥n es, efectivamente, nula (correlaci√≥n = 0).\u003c/li\u003e\n\u003cli\u003eSorprendentemente, aparece una correlaci√≥n alta (por ejemplo, -0.89).\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eImaginemos lo segundo: a mayor consumo de tocino, menor velocidad de desplazamiento. Intrigado, el investigador plantea una hip√≥tesis: una persona que corre a 12 km/h, tras seguir una dieta basada en tocino, pasa a correr a 7 km/h. Realiza el experimento y el voluntario corre a 11 km/h. ¬øQu√© ha pasado?\u003c/p\u003e\n\u003cp\u003eLa correlaci√≥n daba una se√±al clara, pero los resultados no fueron tan extremos como se esperaba. Esto es porque \u003cstrong\u003ela correlaci√≥n es una ilusi√≥n\u003c/strong\u003e, y no cuenta toda la historia. Puede haber un tercer factor que no estamos considerando.\u003c/p\u003e\n\u003cp\u003ePor ejemplo, el sujeto pudo haber usado zapatillas de fibra de carbono que practicamente le hacen volar y el experimentador no lo sab√≠a. En este caso, el tocino no ser√≠a el √∫nico ‚Äúculpable‚Äù. Esto es una \u003cstrong\u003ecorrelaci√≥n espuria\u003c/strong\u003e.\n\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"that-graph-is-so-crazzzzy-and-real-love-her\"\u003e\u003cem\u003eThat graph is so crazzzzy (and real)!! Love her!!!!\u003c/em\u003e\u003c/h2\u003e\n\u003cbr\u003e\r\n\u003cp\u003eY s√≠, existen correlaciones espurias entre fen√≥menos totalmente absurdos. De verdad.\u003c/p\u003e\n\u003cp\u003eUna de mis favoritas es la del calentamiento global y el n√∫mero de piratas. A medida que ha disminuido el n√∫mero de piratas desde el siglo XVIII, ha aumentado la temperatura global. Esto sugiere una \u0026ldquo;correlaci√≥n negativa\u0026rdquo;: menos piratas = m√°s calentamiento global. ¬øSignifica eso que si aumentamos los piratas se enfriar√° el planeta? No. \u003cstrong\u003ePorque‚Ä¶ CORRELACI√ìN NO IMPLICA CAUSALIDAD.\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eY porque ya sabemos cu√°l es la causa real del calentamiento global. Aunque los pastafaristas (s√≠, existe) usan este argumento de los piratas para legitimar su religi√≥n. ¬øC√≥mo? No tengo idea. Si no sabes de qu√© estoy hablando, googlealo, no tiene desperdicio.\u003c/p\u003e\n\u003cp\u003eOtro ejemplo loco: el n√∫mero de pel√≠culas protagonizadas por Nicolas Cage correlaciona con el n√∫mero de inspectores de seguridad de transporte en Dakota del Norte. ¬°Correlaci√≥n de 0.902!\n\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.tylervigen.com/spurious/correlation/5837_the-number-of-movies-nicolas-cage-appeared-in_correlates-with_the-number-of-transportation-security-screeners-in-north-dakota\"\u003e\u003cimg src=\"/5837_the-number-of-movies-nicolas-cage-appeared-in_correlates-with_the-number-of-transportation-security-screeners-in-north-dakota.png\" alt=\"Grafico Nicolas Cage\"\u003e\u003c/a\u003e\n\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003eSi tienes curiosidad por descubrir que otras muchas correlaciones locas pero reales se dan en el mundo, la web üëâ \u003ca href=\"https://www.tylervigen.com/spurious-correlations\"\u003ehttps://www.tylervigen.com/spurious-correlations\u003c/a\u003e est√° plagada de ellas.\u003c/p\u003e\n\u003cp\u003eYo ya paso m√°s tiempo aqu√≠ que en Tik Tok.\n\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"nuevo-√°lbum-de-lana-del-rey-ultrafascism\"\u003eNuevo √°lbum de Lana del Rey: \u003cem\u003eUltrafascism\u003c/em\u003e\u003c/h2\u003e\n\u003cbr\u003e\r\n\u003cp\u003eEs broma, m√°s bien esa es la pr√≥xima era de Kanye West. Pero no nos desviemos.\u003c/p\u003e\n\u003cp\u003eA estas alturas, creo que no hace falta insistir m√°s en por qu√© el post del principio no solo no demuestra nada, sino que es enga√±oso y deshonesto. Es m√°s, tiene un claro trasfondo pol√≠tico. ¬øSi no, a qu√© viene la menci√≥n a Donald Trump?\u003c/p\u003e\n\u003cp\u003eEse tweet refuerza un discurso que atenta contra las personas con autismo y da alas al movimiento antivacunas.\u003c/p\u003e\n\u003cp\u003eSi te interesa c√≥mo el mal uso del conocimiento cient√≠fico y la mala interpretaci√≥n de los datos se utiliza para legitimar discursos ideol√≥gicos da√±inos, te recomiendo este v√≠deo de @aldemial (En Twitter y en Youtube):\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://youtu.be/rw-hup4TFvU?si=GxwyxNvL0_lUjKsK\"\u003e\u003cimg src=\"/@aldemial.jpg\" alt=\"V√≠deo @aldemial\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003ePor si alg√∫n d√≠a te toca defender que los progres no estamos locos. Que, tal y como va el patio‚Ä¶ nos va a tocar m√°s pronto que tarde.\n\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"el-que-saca-la-ciencia-pa-ense√±arla-mal-es-un-parguela\"\u003eEl que saca la ciencia pa ense√±arla (mal) es un parguela\u003c/h2\u003e\n\u003cbr\u003e\r\n\u003cp\u003eYo m√°s que una pregunta tengo un par de reflexiones respecto al tweet que ha inspirado este texto.\u003c/p\u003e\n\u003cp\u003eProfesionalmente, me sigue sorprendiendo la escasa formaci√≥n en metodolog√≠a b√°sica de muchos investigadores.  En ciencia, cabe preguntarse hasta qu√© punto uno es responsable de su propia ignorancia. No se trata de culpar por no saberlo todo ‚Äînadie lo sabe‚Äî, pero s√≠ de reconocer que, en cierto momento, la falta de formaci√≥n deja de ser una carencia y se convierte en negligencia. Y la negligencia, cuando es persistente y consciente, s√≠ te hace culpable. De lo contrario, no solo queda en entredicho la calidad del trabajo, sino la honestidad, que es a√∫n peor.\n\u003cbr\u003e\u003cbr\u003e\nPersonalmente, me cabrea que se aprovechen del desconocimiento general en estad√≠stica para difundir y reforzar discursos y pol√≠ticas inhumanas. O quiz√° lo que m√°s me cabrea es que estos casos revelan los fr√°giles y escasos cortafuegos que tenemos frente a la desinformaci√≥n, especialmente cuando se disfraza de ciencia. En estos contextos, las mentiras act√∫an como espejos: nos muestran las grietas en la educaci√≥n l√≥gico-cient√≠fica de nuestra sociedad. No s√© en qu√© punto del sistema educativo se tuercen los ladrillos de las barreras que deber√≠an protegernos de los argumentos tramposos, pero la barra niveladora no miente: est√°n torcidos.\n\u003cbr\u003e\u003cbr\u003e\nY conviene recordarlo, porque cuando los datos se manipulan, las consecuencias no son estad√≠sticas: son humanas.\u003c/p\u003e\n","description":"El art√≠culo desmiente un gr√°fico viral que err√≥neamente vincula vacunas y autismo, explicando que las correlaciones no implican causalidad. Advierte sobre las correlaciones espurias y critica el uso indebido de la ciencia para promover discursos ideol√≥gicos peligrosos.","image":null,"permalink":"http://localhost:1313/blog/tocino_y_velocidad/","title":"Y YA VAN 4854897589492 ESTUDIOS CIENT√çFICOS QUE NO DEMUESTRAN NADA SOBRE EL TOCINO Y LA VELOCIDAD üé∂üé∂"},{"content":"\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"una-aproximaci√≥n-bayesiana-al-an√°lisis-multinivel\"\u003eUna Aproximaci√≥n Bayesiana al An√°lisis Multinivel\u003c/h2\u003e\n\u003cbr\u003e\r\n\u003cp\u003eEl an√°lisis multinivel es un procedimiento estad√≠stico que permite dar cuenta de la idiosincrasia y, por ende, de la variabilidad no solo de los individuos, sino de sus agrupaciones: instituciones, centros educativos, territorios, etc. \u003cstrong\u003eTodo depende de la articulaci√≥n te√≥rica desde la cual se parta.\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003ePor ejemplo, se puede establecer como objeto de estudio a un grupo de personas formado por varios individuos y analizar las diferencias entre ellos (nivel 1), al mismo tiempo que se examinan las diferencias entre los grupos en los que dichos individuos se encuentran (nivel 2). Asimismo, es posible ampliar el modelo incorporando niveles adicionales, como territorios o pa√≠ses (nivel 3), para captar la variabilidad asociada a estructuras m√°s complejas.\u003c/p\u003e\n\u003cp\u003eEsto da cuenta de la flexibilidad y utilidad de los an√°lisis multinivel, caracter√≠stica muy apreciada por el enfoque bayesiano dado que:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e‚ÄúLa propia l√≥gica de los m√©todos bayesianos se adapta de forma natural a los m√©todos de efectos aleatorios, en los que los par√°metros pasan a ser considerados variables aleatorias.‚Äù\u003cbr\u003e\n\u003cem\u003e(Revuelta \u0026amp; Xim√©nez, 2014)\u003c/em\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003ePor ello, este trabajo se compromete a explorar las posibilidades que ofrece el an√°lisis multinivel bayesiano con datos recogidos en 10 centros educativos sobre el rendimiento de los estudiantes en matem√°ticas, centrando nuestro inter√©s en la variabilidad existente entre centros, pero tambi√©n en cada centro.\u003c/p\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"m√©todo\"\u003eM√©todo\u003c/h2\u003e\n\u003cp\u003eLos datos se recogieron en 10 centros distintos (\u003ccode\u003eschid\u003c/code\u003e) cuya muestra total es de 260 estudiantes. Las variables medidas son:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eRendimiento en matem√°ticas\u003c/strong\u003e: puntuaci√≥n en una escala de 0-100. Variable dependiente (\u003ccode\u003emath\u003c/code\u003e).\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eHoras de deberes de matem√°ticas\u003c/strong\u003e: n√∫mero de horas diarias que dedica cada estudiante. Variable predictora de primer nivel (\u003ccode\u003ehomework\u003c/code\u003e).\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ePuesto que nuestro inter√©s reside en la exploraci√≥n de la flexibilidad de los modelos multinivel, se han estimado 3 modelos:\u003c/p\u003e\n\u003chr\u003e\n\u003cbr\u003e\r\n\u003ch3 id=\"modelo-0-intersecciones-aleatorias-sin-variable-predictora\"\u003e\u003cem\u003eModelo 0: Intersecciones aleatorias sin variable predictora\u003c/em\u003e\u003c/h3\u003e\n\u003cp\u003eNo se tiene en cuenta ninguna variable predictora. Las intersecciones se consideran aleatorias entre centros.\u003cbr\u003e\nPar√°metros estimados:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eParte fija de la intersecci√≥n: \\(\\mu_{0}\\)\u003c/li\u003e\n\u003cli\u003eParte aleatoria de la intersecci√≥n: \\(\\omega^2_{0}\\)\u003c/li\u003e\n\u003cli\u003eVarianza del error: \\(\\sigma^2_{e}\\)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eEste modelo propone que las medias en el desempe√±o en matem√°ticas difieren entre centros, sin considerar ninguna variable predictora. Es el modelo nulo.\u003c/p\u003e\n\u003chr\u003e\n\u003cbr\u003e\r\n\u003ch3 id=\"modelo-1-intersecciones-aletorias-pendientes-fijas-con-una-variable-predictora-de-primer-nivel\"\u003e\u003cem\u003eModelo 1: Intersecciones aletorias, pendientes fijas con una variable predictora de primer nivel\u003c/em\u003e\u003c/h3\u003e\n\u003cp\u003eSe introduce una variable predictora de primer nivel (\u003ccode\u003ehomework\u003c/code\u003e). Se consideran intersecciones aleatorias y pendientes fijas.\u003cbr\u003e\nPar√°metros estimados:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eParte fija de la intersecci√≥n: \\(\\mu_{0}\\)\u003c/li\u003e\n\u003cli\u003eParte aleatoria de la intersecci√≥n: \\(\\omega^2_{0}\\)\u003c/li\u003e\n\u003cli\u003eParte fija de la pendiente: \\(\\mu_{1}\\)\u003c/li\u003e\n\u003cli\u003eVarianza del error: \\(\\sigma^2_{e}\\)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eEste modelo propone que las medias en el desempe√±o en matem√°ticas difieren entre centros teniendo en cuenta \u003ccode\u003ehomework\u003c/code\u003e, pero asume que su efecto es el mismo en todos los colegios.\u003c/p\u003e\n\u003cbr\u003e\r\n\u003cdiv style=\"display:flex; justify-content:center; gap:30px; align-items:flex-start;\"\u003e\r\n  \u003cfigure style=\"margin:0; width:360px; text-align:center;\"\u003e\r\n    \u003cimg src=\"/mcmc_plots_1.png\" alt=\"Cadenas de Markov Monte Carlo de los par√°metros del Modelo 1.\" width=\"480\"\u003e\r\n    \u003cfigcaption style=\"font-style:italic; margin-top:8px;\"\u003e\r\n      Figura 4. Cadenas de Markov Monte Carlo (MCMC) de los par√°metros del Modelo 1.\r\n    \u003c/figcaption\u003e\r\n  \u003c/figure\u003e\r\n  \u003cfigure style=\"margin:0; width:370px; text-align:center;\"\u003e\r\n    \u003cimg src=\"/pairs_plot_1.png\" alt=\"Gr√°fica de pares MCMC que muestra las distribuciones marginales (diagonal) y las correlaciones entre par√°metros (scatterplots fuera de la diagonal) del Modelo 1.\" width=\"480\"\u003e\r\n    \u003cfigcaption style=\"font-style:italic; margin-top:8px;\"\u003e\r\n      Figura 5. Gr√°fica de pares MCMC que muestra las distribuciones marginales (diagonal) y las correlaciones entre par√°metros (scatterplots fuera de la diagonal) del Modelo 1.\r\n    \u003c/figcaption\u003e\r\n  \u003c/figure\u003e\r\n  \u003cfigure style=\"margin:0; width:370px; text-align:center;\"\u003e\r\n    \u003cimg src=\"/cowplot_1.png\" alt=\"Posterior Predictive Checks del Modelo 1.\" width=\"480\"\u003e\r\n    \u003cfigcaption style=\"font-style:italic; margin-top:8px;\"\u003e\r\n      Figura 6. Posterior Predictive Checks del Modelo 1.\r\n    \u003c/figcaption\u003e\r\n  \u003c/figure\u003e\r\n\u003c/div\u003e\r\n\u003cbr\u003e\u003cbr\u003e\r\n\u003chr\u003e\n\u003cbr\u003e\r\n\u003ch3 id=\"modelo-2-intersecciones-y-pendientes-aletorias-con-una-variable-predictora-de-primer-nivel\"\u003e\u003cem\u003eModelo 2: Intersecciones y pendientes aletorias con una variable predictora de primer nivel\u003c/em\u003e\u003c/h3\u003e\n\u003cp\u003eIgual al Modelo 1, pero con pendientes aleatorias entre centros.\u003cbr\u003e\nPar√°metros estimados:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eParte fija de la intersecci√≥n: \\(\\mu_{0}\\)\u003c/li\u003e\n\u003cli\u003eParte aleatoria de la intersecci√≥n: \\(\\omega^2_{0}\\)\u003c/li\u003e\n\u003cli\u003eParte fija de la pendiente: \\(\\mu_{1}\\)\u003c/li\u003e\n\u003cli\u003eParte aleatoria de la pendiente: \\(\\omega^2_{1}\\)\u003c/li\u003e\n\u003cli\u003eCovarianza intersecci√≥n‚Äìpendiente: \\(\\omega_{01}\\)\u003c/li\u003e\n\u003cli\u003eVarianza del error: \\(\\sigma^2_{e}\\)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eEste modelo propone que las medias en el desempe√±o en matem√°ticas difieren entre centros teniendo en cuenta \u003ccode\u003ehomework\u003c/code\u003e, pero ahora se asume que el efecto de esta variable \u003cstrong\u003eno es el mismo\u003c/strong\u003e en todos los colegios.\u003c/p\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"anexo-script-de-r-en-combinaci√≥n-con-lenguaje-stan-cmdstanr\"\u003eANEXO: \u003cem\u003eScript de R en combinaci√≥n con lenguaje Stan (cmdstanr)\u003c/em\u003e\u003c/h2\u003e\n\u003cbr\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-r\" data-lang=\"r\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# HEADER: Script Information\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Script Name: cmdstanr_version.R\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Author: Alicia Gil Matute\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Position: Data Scientist\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Date Created: 2025-03-07\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Email: aliciagilmatute@gmail.com\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# SECTION 1: Load packages\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Libraries necessary for the script to function\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(MASS)          \u003cspan style=\"color:#75715e\"\u003e# Multivariate gaussian distribution\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(cmdstanr)      \u003cspan style=\"color:#75715e\"\u003e# Estimate bayesian models in Stan (better than rstan)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(posterior)     \u003cspan style=\"color:#75715e\"\u003e# Extract summaries\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(loo)           \u003cspan style=\"color:#75715e\"\u003e# WAIC and LOO estimates\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(haven)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(bayesplot)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(cowplot)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(ggplot2)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(blavaan)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# SECTION 2: Load Data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emlmdata \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eread_dta\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://stats.idre.ucla.edu/stat/examples/imm/imm10.dta\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ex \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emlmdata\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eas.factor\u003c/span\u003e(mlmdata\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elevels\u003c/span\u003e(mlmdata\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid) \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eas.character\u003c/span\u003e(x)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estr\u003c/span\u003e(mlmdata)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eView\u003c/span\u003e(mlmdata)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edata_stan \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elist\u003c/span\u003e(N \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003enrow\u003c/span\u003e(mlmdata), \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                  J \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elength\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eunique\u003c/span\u003e(mlmdata\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid)),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                  schid \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eas.numeric\u003c/span\u003e(mlmdata\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid), \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                  homework \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e mlmdata\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003ehomework, \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                  math \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e mlmdata\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003emath)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eis.na\u003c/span\u003e(data_stan)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehist\u003c/span\u003e(data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehist\u003c/span\u003e(data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003ehomework)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehist\u003c/span\u003e(data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003emath)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# SECTION 3: Estimate bayesian multilevel model \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Model 0: No predictor variable and Random Intercepts\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#Priors poco informativas:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#beta0~normal(0,10);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#sigma_e~gamma(1,0.5);    \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#sigma_u0~gamma(1,0.5);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#u0~normal(0,sigma_u0);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Compilamos el modelo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebmultinivel_0 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecmdstan_model\u003c/span\u003e(stan_file \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;model0_cmdstanr_version.stan\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebmultinivel_0f \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e bmultinivel_0\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003esample\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  data \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e data_stan,       \u003cspan style=\"color:#75715e\"\u003e# Stan data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  chains \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e,            \u003cspan style=\"color:#75715e\"\u003e# Number of chains\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  parallel_chains \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e,   \u003cspan style=\"color:#75715e\"\u003e# Number of parallel chains\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  iter_warmup \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e500\u003c/span\u003e,     \u003cspan style=\"color:#75715e\"\u003e# Adaptation iterations\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  iter_sampling \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1500\u003c/span\u003e,  \u003cspan style=\"color:#75715e\"\u003e# Sampled iterations\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  refresh \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e500\u003c/span\u003e,         \u003cspan style=\"color:#75715e\"\u003e# Progress bar at 500 iterations\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  init \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e)              \u003cspan style=\"color:#75715e\"\u003e# All starting values = 0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#necesitamos extraer el posterior para visualizar las cadenas de Markov\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eposterior_samples0 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e bmultinivel_0f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003edraws\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_trace\u003c/span\u003e(posterior_samples0, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta0\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_u0\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_e\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Posterior distribution: pairs plots\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_pairs\u003c/span\u003e(posterior_samples0, pars\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta0\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_u0\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_e\u0026#34;\u003c/span\u003e), diag_fun \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hist\u0026#34;\u003c/span\u003e, \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           off_diag_fun \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;scatter\u0026#34;\u003c/span\u003e, off_diag_args \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elist\u003c/span\u003e(alpha \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0.5\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_intervals\u003c/span\u003e(posterior_samples0, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta0\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_u0\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_e\u0026#34;\u003c/span\u003e) )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#escuelas\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eparams \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epaste0\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;u0[\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;]\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_trace\u003c/span\u003e(posterior_samples0, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e params)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_hist\u003c/span\u003e(posterior_samples0, pars\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eparams)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#mcmc_scatter(posterior_samples, pars=c(\u0026#34;u0[1]\u0026#34;,\u0026#34;u0[2]\u0026#34;))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_intervals\u003c/span\u003e(posterior_samples0, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e params)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#Resultados \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebmultinivel_0f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003esummary\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#EL AJUSTE A LOS DATOS (equivalente al ajuste global) con la cmdstanr SE EVALUA CON PPMC:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#¬øPodemos distinguir los datos observados de datos simulados desde el modelo (math_rep)?\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# SECTION 3.b: Posterior Predictive Model Check (PPMC) MODELO 0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Extraer y_rep correctamente desde CmdStanR\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ey_rep_0 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eas_draws_matrix\u003c/span\u003e(bmultinivel_0f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003edraws\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;y_rep\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Seleccionar solo 100 iteraciones aleatorias (iteraciones)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eset.seed\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e123\u003c/span\u003e)  \u003cspan style=\"color:#75715e\"\u003e# Para reproducibilidad\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ey_rep_subset_0 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e y_rep_0\u003cspan style=\"color:#a6e22e\"\u003e[sample\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003enrow\u003c/span\u003e(y_rep_0), \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e), ]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Verificar dimensiones\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003edim\u003c/span\u003e(y_rep_subset_0)  \u003cspan style=\"color:#75715e\"\u003e# Deber√≠a ser (100, 300)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# N√∫mero de colegios\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eJ \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elength\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eunique\u003c/span\u003e(data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Lista para almacenar los gr√°ficos\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eposterior_plots_list_0 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003evector\u003c/span\u003e(mode \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;list\u0026#34;\u003c/span\u003e, length \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e J)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Generar gr√°ficos PPMC para cada colegio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e(j \u003cspan style=\"color:#66d9ef\"\u003ein\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003eJ){\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  posterior_plots_list_0[[j]] \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eppc_dens_overlay\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    y \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003emath[data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e j],        \u003cspan style=\"color:#75715e\"\u003e# Datos reales del colegio j\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    yrep \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e y_rep_subset_0[, data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e j]  \u003cspan style=\"color:#75715e\"\u003e# Simulaciones para colegio j\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ) \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003elabs\u003c/span\u003e(title \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epaste\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Colegio\u0026#34;\u003c/span\u003e, j))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Mostrar los gr√°ficos juntos\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecowplot\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eplot_grid\u003c/span\u003e(plotlist \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e posterior_plots_list_0)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#####IMPORTANTE##########\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#No tiene sentido obtenerlo para beta0, sigma_uo y sigma_e porque son parametros de la distribucion (es un valor puntual \u0026#34;inferido\u0026#34;). En todo caso podria tener sentido obtenerlo para la beta0 ya que es la media de matematicas en las escuelas, pero es mas informativo tenerlo para cada escuela\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# SECTION 4: Estimate bayesian multilevel model \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Model 1: Predictor variable and Random Intercepts and fixed Slopes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#Priors poco informativas:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#beta[1]~normal(0,10);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#beta[2]~normal(0,10);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#sigma_e~gamma(1,0.5); \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#sigma_u0~gamma(1,0.5);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#u0~normal(0,sigma_u0);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Compilamos el modelo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebmultinivel_1  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecmdstan_model\u003c/span\u003e(stan_file \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;model1_cdmstanr_version.stan\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebmultinivel_1f \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e bmultinivel_1\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003esample\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  data \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e data_stan,       \u003cspan style=\"color:#75715e\"\u003e# Stan data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  chains \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e,            \u003cspan style=\"color:#75715e\"\u003e# Number of chains\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  parallel_chains \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e,   \u003cspan style=\"color:#75715e\"\u003e# Number of parallel chains\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  iter_warmup \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e500\u003c/span\u003e,     \u003cspan style=\"color:#75715e\"\u003e# Adaptation iterations\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  iter_sampling \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1500\u003c/span\u003e,  \u003cspan style=\"color:#75715e\"\u003e# Sampled iterations\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  refresh \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e500\u003c/span\u003e,         \u003cspan style=\"color:#75715e\"\u003e# Progress bar at 500 iterations\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  init \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e)              \u003cspan style=\"color:#75715e\"\u003e# All starting values = 0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#necesitamos extraer el posterior para visualizar las cadenas de Markov\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eposterior_samples1 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e bmultinivel_1f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003edraws\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_trace\u003c/span\u003e(posterior_samples1, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta[1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta[2]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_u0\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_e\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Posterior distribution: pairs plots\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_pairs\u003c/span\u003e(posterior_samples1, pars\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta[1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta[2]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_u0\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_e\u0026#34;\u003c/span\u003e), \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ediag_fun \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hist\u0026#34;\u003c/span\u003e,  off_diag_fun \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;scatter\u0026#34;\u003c/span\u003e, off_diag_args \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elist\u003c/span\u003e(alpha \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0.5\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_intervals\u003c/span\u003e(posterior_samples1, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta[1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta[2]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_u0\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_e\u0026#34;\u003c/span\u003e) )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#escuelas\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eparams \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epaste0\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;u0[\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;]\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_trace\u003c/span\u003e(posterior_samples1, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e params)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_hist\u003c/span\u003e(posterior_samples1, pars\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eparams)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#mcmc_scatter(posterior_samples, pars=c(\u0026#34;u0[1]\u0026#34;,\u0026#34;u0[2]\u0026#34;))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_intervals\u003c/span\u003e(posterior_samples1, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e params)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#Resultados \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebmultinivel_1f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003esummary\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# SECTION 4.b: Posterior Predictive Model Check (PPMC) MODELO 1 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Extraer y_rep correctamente desde CmdStanR\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ey_rep_1 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eas_draws_matrix\u003c/span\u003e(bmultinivel_1f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003edraws\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;y_rep\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Seleccionar solo 100 iteraciones aleatorias (iteraciones)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eset.seed\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e123\u003c/span\u003e)  \u003cspan style=\"color:#75715e\"\u003e# Para reproducibilidad\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ey_rep_subset_1 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e y_rep_1\u003cspan style=\"color:#a6e22e\"\u003e[sample\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003enrow\u003c/span\u003e(y_rep_1), \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e), ]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Verificar dimensiones\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003edim\u003c/span\u003e(y_rep_subset_1)  \u003cspan style=\"color:#75715e\"\u003e# Deber√≠a ser (100, 300)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# N√∫mero de colegios\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eJ \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elength\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eunique\u003c/span\u003e(data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Lista para almacenar los gr√°ficos\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eposterior_plots_list_1 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003evector\u003c/span\u003e(mode \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;list\u0026#34;\u003c/span\u003e, length \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e J)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Generar gr√°ficos PPMC para cada colegio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e(j \u003cspan style=\"color:#66d9ef\"\u003ein\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003eJ){\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  posterior_plots_list_1[[j]] \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eppc_dens_overlay\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    y \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003emath[data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e j],        \u003cspan style=\"color:#75715e\"\u003e# Datos reales del colegio j\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    yrep \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e y_rep_subset_1[, data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e j]  \u003cspan style=\"color:#75715e\"\u003e# Simulaciones para colegio j\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ) \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003elabs\u003c/span\u003e(title \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epaste\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Colegio\u0026#34;\u003c/span\u003e, j))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Mostrar los gr√°ficos juntos\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecowplot\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eplot_grid\u003c/span\u003e(plotlist \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e posterior_plots_list_1)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# SECTION 4.c: Comparacion de modelos (capacidad predictiva)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eloo_1f  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eloo\u003c/span\u003e(x \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e bmultinivel_0f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003edraws\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;log_lik\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eloo_2f  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eloo\u003c/span\u003e(x \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e bmultinivel_1f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003edraws\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;log_lik\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eloo_compare\u003c/span\u003e(loo_1f, loo_2f)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# SECTION 5.a: Estimate bayesian multilevel model \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Model 2: Predictor variable and Random Intercepts and fixed Slopes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#Priors poco informativas:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#  L_u ~ lkj_corr_cholesky(1);   \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#to_vector(z_u) ~ normal(0, 1);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#beta~normal(0,10);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#sigma_e~gamma(1,0.5); \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#sigma_u~gamma(1,0.5);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebmultinivel_2  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecmdstan_model\u003c/span\u003e(stan_file \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;model2_cmdstanr_version.stan\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebmultinivel_2f \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e bmultinivel_2\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003esample\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  data \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e data_stan,       \u003cspan style=\"color:#75715e\"\u003e# Stan data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  chains \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e,            \u003cspan style=\"color:#75715e\"\u003e# Number of chains\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  parallel_chains \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e,   \u003cspan style=\"color:#75715e\"\u003e# Number of parallel chains\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  iter_warmup \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e500\u003c/span\u003e,     \u003cspan style=\"color:#75715e\"\u003e# Adaptation iterations\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  iter_sampling \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1500\u003c/span\u003e,  \u003cspan style=\"color:#75715e\"\u003e# Sampled iterations\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  refresh \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e500\u003c/span\u003e,         \u003cspan style=\"color:#75715e\"\u003e# Progress bar at 500 iterations\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  init \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e)              \u003cspan style=\"color:#75715e\"\u003e# All starting values = 0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#necesitamos extraer el posterior para visualizar las cadenas de Markov\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eposterior_samples2 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e bmultinivel_2f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003edraws\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#L_U[1,1] y L_u[1,2] no ha convergido pero L_u[2,1] si\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_trace\u003c/span\u003e(posterior_samples2, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta[1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta[2]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_u[1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_u[2]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_e\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;L_u[1,1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;L_u[2,1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;L_u[2,2]\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Posterior distribution: pairs plots\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_pairs\u003c/span\u003e(posterior_samples2, pars\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta[1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta[2]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_u[1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_u[2]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_e\u0026#34;\u003c/span\u003e), \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           diag_fun \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hist\u0026#34;\u003c/span\u003e,  off_diag_fun \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;scatter\u0026#34;\u003c/span\u003e, off_diag_args \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elist\u003c/span\u003e(alpha \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0.5\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_pairs\u003c/span\u003e(posterior_samples2, pars\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;L_u[1,1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;L_u[2,1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;L_u[2,2]\u0026#34;\u003c/span\u003e), \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           diag_fun \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hist\u0026#34;\u003c/span\u003e,  off_diag_fun \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;scatter\u0026#34;\u003c/span\u003e, off_diag_args \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elist\u003c/span\u003e(alpha \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0.5\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_intervals\u003c/span\u003e(posterior_samples2, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta[1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;beta[2]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_u[1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_u[2]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sigma_e\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_intervals\u003c/span\u003e(posterior_samples2, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;L_u[1,1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;L_u[2,1]\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;L_u[2,2]\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#escuelas\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eparams \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epaste0\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;u0[\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;]\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_trace\u003c/span\u003e(posterior_samples2, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e params)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_hist\u003c/span\u003e(posterior_samples2, pars\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eparams)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#mcmc_scatter(posterior_samples, pars=c(\u0026#34;u0[1]\u0026#34;,\u0026#34;u0[2]\u0026#34;))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emcmc_intervals\u003c/span\u003e(posterior_samples2, pars \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e params)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#Resultados \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebmultinivel_2f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003esummary\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebmultinivel_2f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003esummary\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;R\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebmultinivel_2f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003esummary\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;u0\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#en el script de stan se puede indicar directamente que calcule la media de cada colegio a partir\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#de cada u0[j]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#Los parametros de nuestr inter√©s son:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#beta[1]: parte fija interseccion\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#beta[2]: parte fija pendientes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#sigma_u[1]: parte aleatoria interseccion\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#sigma_u[2]: parte aleatoria pendientes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#R[1,2]: covarianza pendientes aleatorias\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#sigma_e: varianza error\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#L_u[i,j]: las necesito para crear R[i,j]***\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# SECTION 5.b: Posterior Predictive Model Check (PPMC) MODELO 1 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Extraer y_rep correctamente desde CmdStanR\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ey_rep_2 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eas_draws_matrix\u003c/span\u003e(bmultinivel_2f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003edraws\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;y_rep\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Seleccionar solo 100 iteraciones aleatorias (iteraciones)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eset.seed\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e123\u003c/span\u003e)  \u003cspan style=\"color:#75715e\"\u003e# Para reproducibilidad\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ey_rep_subset_2 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e y_rep_2\u003cspan style=\"color:#a6e22e\"\u003e[sample\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003enrow\u003c/span\u003e(y_rep_2), \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e), ]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Verificar dimensiones\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003edim\u003c/span\u003e(y_rep_subset_2)  \u003cspan style=\"color:#75715e\"\u003e# Deber√≠a ser (100, 300)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# N√∫mero de colegios\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eJ \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elength\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eunique\u003c/span\u003e(data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Lista para almacenar los gr√°ficos\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eposterior_plots_list_2 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003evector\u003c/span\u003e(mode \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;list\u0026#34;\u003c/span\u003e, length \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e J)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Generar gr√°ficos PPMC para cada colegio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e(j \u003cspan style=\"color:#66d9ef\"\u003ein\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003eJ){\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  posterior_plots_list_2[[j]] \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eppc_dens_overlay\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    y \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003emath[data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e j],        \u003cspan style=\"color:#75715e\"\u003e# Datos reales del colegio j\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    yrep \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e y_rep_subset_2[, data_stan\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eschid \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e j]  \u003cspan style=\"color:#75715e\"\u003e# Simulaciones para colegio j\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ) \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003elabs\u003c/span\u003e(title \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epaste\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Colegio\u0026#34;\u003c/span\u003e, j))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Mostrar los gr√°ficos juntos\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecowplot\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eplot_grid\u003c/span\u003e(plotlist \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e posterior_plots_list_2)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# SECTION 5.c: Comparacion de modelos (capacidad predictiva)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ==============================================================================\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eloo_1f  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eloo\u003c/span\u003e(x \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e bmultinivel_0f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003edraws\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;log_lik\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eloo_2f  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eloo\u003c/span\u003e(x \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e bmultinivel_1f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003edraws\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;log_lik\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eloo_3f \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eloo\u003c/span\u003e(x\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ebmultinivel_2f\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003edraws\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;log_lik\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eloo_compare\u003c/span\u003e(loo_1f, loo_2f, loo_3f)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n","description":"Estudio sobre an√°lisis multinivel bayesiano de rendimiento en matem√°ticas entre 10 centros educativos.","image":null,"permalink":"http://localhost:1313/proyectos/analisis_multinivel/","title":"An√°lisis Multinivel Bayesiano"},{"content":"\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"introducci√≥n\"\u003eIntroducci√≥n\u003c/h2\u003e\n\u003cp\u003eEl an√°lisis factorial confirmatorio (AFC) es la t√©cnica estad√≠stica mediante la cual podemos establecer la estructura subyacente de una serie de variables observadas y as√≠ poder medir y usar variables no observables. Dicha t√©cnica utiliza la matriz de varianzas y covarianzas para evaluar si los datos ajustan al modelo te√≥rico, as√≠ que para realizar un AFC sobre unos datos, podemos introducir como input los datos en bruto o directamente la matriz de varianzas y covarianzas.\u003c/p\u003e\n\u003cp\u003eSin embargo, si en nuestra base de datos existen valores perdidos, el software con el cual vayamos a trabajar va a utilizar alguna estrategia para poder realizar los c√°lculos sin estos valores perdidos (la m√°s com√∫n es \u0026ldquo;eliminaci√≥n por lista\u0026rdquo;). Esto provoca que nuestros an√°lisis no est√©n utilizando todas las observaciones recogidas, sino muchas menos. Por ello existen estrategias modernas para no desechar tantos casos, como la imputaci√≥n m√∫ltiple o la imputaci√≥n por m√°xima verosimilitud.\u003c/p\u003e\n\u003cp\u003eEste trabajo pretende poner a prueba la estrategia de imputaci√≥n m√∫ltiple para realizar un AFC el cual recibe como input una matriz de varianzas y covarianzas calculada sobre una base de datos. Una base de datos sobre la que se han simulado valores perdidos MCAR y se han imputado mediante dicha estrategia. Queremos estudiar como recupera los parametros estimados de un AFC y sus indices de ajuste y compararlo con el modelo AFC que recibe como input la matriz de varianzas y covarianzas sin simular valores perdidos.\u003c/p\u003e\n\u003cbr\u003e\r\n\u003ch2 id=\"objetivos-e-hip√≥tesis\"\u003eObjetivos e Hip√≥tesis\u003c/h2\u003e\n\u003cp\u003eEl objetivo de este trabajo es el estudio de la recuperaci√≥n de los par√°metros estimados y los √≠ndices de ajuste de un modelo AFC que recibe como input una matriz de varianzas y covarianzas de unos datos imputados. De este manera se podr√° comprobar si el m√©todo de imputaci√≥n m√∫ltiple es recomendable para emplearse en modelos AFC.\u003c/p\u003e\n\u003cp\u003eNuestra hip√≥tesis vaticina que las estimaciones y los √≠ndices de ajuste del modelo AFC imputado son muy similares a los del modelo AFC sin imputar.\u003c/p\u003e\n\u003cbr\u003e\r\n\u003ch2 id=\"m√©todo\"\u003eM√©todo\u003c/h2\u003e\n\u003cp\u003eLa base de datos empleada es la llamada \u0026ldquo;Liderazgo.sav\u0026rdquo; donde se incluyen 15 variables de las cuales 13 son √≠tems que miden 3 factores relacionados con el liderazgo, pero de los cuales solo 11 forman parte de la estructura factorial (los items 3 y 9 no forman parte de la estructura factorial, como se puede ver en la Figura 1). Los √≠tems est√°n medidos en una escala Likert con valores 1-7. El tama√±o de la muestra es de 96 sujetos y todos los an√°lisis se han realizado con el software R.\u003c/p\u003e\n\u003cbr\u003e\r\n\u003cdiv style=\"display:flex; justify-content:center; gap:30px; align-items:center;\"\u003e\r\n  \u003cfigure style=\"margin:0; width:360px; text-align:center;\"\u003e\r\n    \u003cimg src=\"/Estructura_AFC.png\" alt=\"Estructura Factorial del Modelo de Liderazgo de Frutos (1998)\" width=\"360\"\u003e\r\n    \u003cfigcaption style=\"font-style:italic; margin-top:8px;\"\u003e\r\n      Figura 1. Estructura Factorial del Modelo de Liderazgo de Frutos (1998).\r\n    \u003c/figcaption\u003e\r\n  \u003c/figure\u003e\r\n\u003c/div\u003e\r\n\u003cbr\u003e\u003cbr\u003e\r\n\u003cp\u003eEn primer lugar, se cargan los archivos y se eliminan de la base de datos los √≠tems 3 y 9 que no forman parte de la estructura, y 2 variables que serv√≠an a otros objetivos del estudio. Despu√©s se calcula la matriz de varianzas y covarianzas de los datos originales que utilizaremos despu√©s para extraer la matriz residual y tener una primera impresi√≥n de s√≠ se ha realizado bien o no la imputaci√≥n m√∫ltiple.\u003c/p\u003e\n\u003cp\u003eEn segundo lugar, simulamos valores perdidos MCAR en el 40% de la muestra en todos los √≠tems y empleamos la librer√≠a mice para realizar la imputaci√≥n m√∫ltiple. Se imputan 20 bases de datos mediante el m√©todo \u0026ldquo;pmm\u0026rdquo; (predictive mean matching) y despu√©s, mediante un bucle for() se realizan las matrices de varianzas y covarianzas de cada una de las 20 bases de datos imputadas.A continuaci√≥n, calculamos la matriz promedio de esas 20 matrices de varianzas y covarianzas.\u003c/p\u003e\n\u003cp\u003eEn tercer lugar, especificamos el modelo de AFC que se ha presentado en la imagen e introducimos como input esa matriz promedio e indicamos que el m√©todo de estimaci√≥n sea m√°xima verosimilitud (\u0026ldquo;ML\u0026rdquo;). Indicamos tambi√©n que imprima los √≠ndices de ajuste.\u003c/p\u003e\n\u003cp\u003ePor √∫ltimo, calculamos el modelo AFC con los datos originales (sin valores perdidos) pero introduciendo tambi√©n como input la matriz de varianzas y covarianzas.\u003c/p\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"resultados\"\u003eResultados\u003c/h2\u003e\n\u003cbr\u003e\r\n\u003ch3 id=\"√≠ndices-de-ajuste-afc-imputado-vs-√≠ndices-de-ajuste-afc-original\"\u003e√çndices de Ajuste AFC imputado VS √çndices de Ajuste AFC original\u003c/h3\u003e\n\u003cbr\u003e\r\n\u003cdiv style=\"display:flex; justify-content:center; gap:30px; align-items:flex-start;\"\u003e\r\n  \u003cfigure style=\"margin:0; width:360px; text-align:center;\"\u003e\r\n    \u003cimg src=\"/ajuste_imp.png\" alt=\"Output de R de los √≠ndices de ajuste del modelo imputado\" width=\"355\"\u003e\r\n    \u003cfigcaption style=\"font-style:italic; margin-top:8px;\"\u003e\r\n      Figura 2. √çndices de ajuste \r\n      del modelo AFC imputado.\r\n    \u003c/figcaption\u003e\r\n  \u003c/figure\u003e\r\n  \u003cfigure style=\"margin:0; width:370px; text-align:center;\"\u003e\r\n    \u003cimg src=\"/Ajuste_raw.png\" alt=\"Output de R de los √≠ndices de ajuste del modelo no imputado\" width=\"380\"\u003e\r\n    \u003cfigcaption style=\"font-style:italic; margin-top:8px;\"\u003e\r\n      Figura 3. √çndices de ajuste \r\n      del modelo AFC no imputado.\r\n    \u003c/figcaption\u003e\r\n  \u003c/figure\u003e\r\n\u003c/div\u003e\r\n\u003cbr\u003e\u003cbr\u003e\r\n\u003cp\u003eComo podemos observar, el valor del estad√≠stico de chi-cuadrado resulta significativo en ambso modelos lo que signfica que el modelo propuesto ajusta a los datos, pero con valores de chi-cuadrado diferentes, en el modelo de AFC imputado se obtiene un valor de chi-cuadrado de 172.399 y en el modelo de AFC original un chi-cuadrado de 80.412. Igualmente, estan empleando la misma cantidad de informaci√≥n porque ambos est√°n empleando 41 grados de libertad. Por otro lado, el √≠ndice de RMSEA que tambi√©n evalua el ajuste del modelo a los datos resulta mayor a 0.05 en ambos modelos, con lo cual recibimos informaci√≥n contradictoria. Como el estad√≠stico chi-cuadrado es tan sensible a la muestra, RMSEA resulta ser un √≠ndice m√°s robusto con lo cual, basandonos en √©l, tanto el modelo AFC imputado como el modelo AFC original tiene un mal ajuste a los datos. Est√° cuesti√≥n, se comentar√° en los siguientes apartados.\u003c/p\u003e\n\u003cp\u003eRespecto a los √≠ndices TLI y CFI hay diferencias m√°s claras entre ambos modelos. Mientras que en modelo AFC imputado los valores estimados de TLI como CFI no superan el 0.95, en el modelo de AFC original s√≠ son m√°s pr√≥ximos a 0.95. Con lo cual, el modelo AFC imputado recupera mal la mejora del ajuste respecto al modelo nulo.\u003c/p\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch3 id=\"estimaciones-de-par√°metros-modelo-afc-imputado-vs-estimaciones-de-par√°metros-modelo-afc-original\"\u003eEstimaciones de par√°metros modelo AFC imputado VS estimaciones de par√°metros modelo AFC original\u003c/h3\u003e\n\u003cbr\u003e\r\n\u003cdiv style=\"display:flex; gap:20px; align-items:flex-start;\"\u003e\r\n  \u003cfigure\u003e\r\n    \u003cimg src=\"/estimaciones_imp.png\" alt=\"Output de R de las estimaciones de los par√°metros del modelo imputado\" width=\"440\"\u003e\r\n    \u003cfigcaption style=\"text-align:center; font-style:italic; margin-top:8px;\"\u003e\r\n      Figura 4. Estimaciones de los par√°metros \r\n      del modelo AFC imputado.\r\n    \u003c/figcaption\u003e\r\n  \u003c/figure\u003e\r\n  \u003cfigure\u003e\r\n    \u003cimg src=\"/estimaciones_raw.png\" alt=\"Output de R de las estimaciones de los par√°metros del modelo no imputado\" width=\"440\"\u003e\r\n    \u003cfigcaption style=\"text-align:center; font-style:italic; margin-top:8px;\"\u003e\r\n      Figura 5. Estimaciones de los par√°metros \r\n      del modelo AFC no imputado.\r\n    \u003c/figcaption\u003e\r\n  \u003c/figure\u003e\r\n\u003c/div\u003e\r\n\u003cbr\u003e\u003cbr\u003e\r\n\u003ch2 id=\"conclusiones\"\u003eConclusiones\u003c/h2\u003e\n\u003cp\u003eAntes de comentar los resultados es importante aclarar lo siguiente: este trabajo no pretende evaluar el ajuste del modelo AFC original ni mejorarlo, y mucho menos pretendemos que el modelo AFC imputado supere en ajuste al modelo original, es imposible dado que solo podemos aspirar a que se parezca al ajuste original. Si el modelo AFC original tiene un ajuste mediocre (como es el caso) el ajuste del modelo imputado, por mucho que pueda parecerse al original, ser√° igual de mediocre. Y lo mismo ocurre con los valores estimados para los pesos factoriales, si el modelo original tiene problemas obtendremos pesos factoriales mayores a 1, tambi√©n los obtendr√° el modelo imputado. As√≠ que, lo que nos interesa evaluar dados los objetivos del estudio es como el modelo AFC imputado se parece al modelo AFC original, y no si alcanza un buen ajuste o pesos factoriales adecuados, porque el modelo AFC original no los alcanza.\u003c/p\u003e\n\u003cp\u003ePor lo general podemos concluir que el m√©todo de imputaci√≥n m√∫ltiple es eficaz porque recupera con bastante robusted el modelo AFC original introduciendo como input la matriz de varianzas y covarianzas. Los √≠ndices de ajuste, aunque en concreto TLI y CFI son los que m√°s difieren (en el modelo AFC imputado interpretamos que no ajusta y en el modelo AFC original s√≠) no son valores muy dispares entre modelos y en t√©rminos muy generales, tienen un ajuste muy similar. Finalmente, respecto a los valores de los pesos factoriales y de las covarianzas entre factores, aunque puedan no coincidir, son diferencias m√≠nimas y se llegan a las mismas interpretaciones.\u003c/p\u003e\n\u003cp\u003ePor √∫ltimo, aunque no hayamos podido identificar el problema que puede subyacer al modelo AFC original para obtener unos √≠ndices de ajuste bastante mejorables y unos pesos factoriales superiores a 1, nuestra sospecha es que se debe al tama√±o muestral. El tama√±o muestral del estudio es de 96 sujetos y la literatura recomienda emplear muestras de 300 sujetos (200 m√≠nimo) para realizar An√°lisis Factoriales Confirmatorios robustos. Por ello, nuestra recomendaci√≥n para futuros estudios es que se recoja un tama√±o muestral adecuado, pero no excesivamente grande dado que chi-cuadrado es sensible al tama√±o muestral.\u003c/p\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"anexo-script-de-r\"\u003eANEXO: \u003cem\u003e\u0026ldquo;Script de R\u0026rdquo;\u003c/em\u003e\u003c/h2\u003e\n\u003c!-- idea: incluir los notebooks con jupyter book como anexo de cada proyecto?? --\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-r\" data-lang=\"r\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003erm\u003c/span\u003e(list\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003els\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eset.seed\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e123\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(haven)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(mice)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(reshape2) \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(mitml)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(lme4)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(lavaan)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(semPlot)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(psych)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edatos \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eread_sav\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Liderazgo.sav\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eView\u003c/span\u003e(datos)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003etable\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eis.na\u003c/span\u003e(datos))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#obtenemos la matriz de var-cov de los datos  brutos para chequear luego como recupera la matriz la imputaci√≥n m√∫ltiple obteniendo la matriz residual\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edatos \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e datos[,\u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e14\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e15\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e)] \u003cspan style=\"color:#75715e\"\u003e#quitamos las variables de los factores y de los √≠tems que no forman parte del modelo CFA\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eraw_m \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecov\u003c/span\u003e(datos)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eraw_m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#Simulamos valores NA al 40% (MCAR)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edatos_NA \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e datos\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003etable\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eis.na\u003c/span\u003e(datos_NA))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Proporci√≥n de valores perdidos a introducir (puedes ajustar seg√∫n tus necesidades)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eproporcion_NA\u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0.4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Obtener el n√∫mero de filas y columnas en tus datos\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enum_filas \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003enrow\u003c/span\u003e(datos_NA)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enum_columnas \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003encol\u003c/span\u003e(datos_NA)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Calcular el n√∫mero total de valores a introducir como perdidos\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enum_NA \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eround\u003c/span\u003e(proporcion_NA\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e num_filas \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e num_columnas)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Generar ubicaciones aleatorias para los valores perdidos\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eubicaciones_NA \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edata.frame\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  fila \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003esample\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003enum_filas, num_NA, replace \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  columna \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003esample\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003enum_columnas, num_NA, replace \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Introducir valores perdidos en las ubicaciones generadas\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e (i \u003cspan style=\"color:#66d9ef\"\u003ein\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003enum_NA) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  datos_NA[ubicaciones_NA\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003efila[i], ubicaciones_NA\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003ecolumna[i]] \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNA\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003etable\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eis.na\u003c/span\u003e(datos_NA))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ewrite.csv\u003c/span\u003e(datos_NA,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;liderazgo_NA.txt\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eView\u003c/span\u003e(datos_NA)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estr\u003c/span\u003e(datos_NA)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#imputamos datos\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eimp \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emice\u003c/span\u003e(datos_NA, seed \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e20000\u003c/span\u003e, meth \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;pmm\u0026#34;\u003c/span\u003e, m \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eimp\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003eimp\u003cspan style=\"color:#f92672\"\u003e$\u003c/span\u003ep1  \u003cspan style=\"color:#75715e\"\u003e# Imputaci√≥n del primer item en las 20 bases de datos\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecomplete_data \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecomplete\u003c/span\u003e(imp, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)  \u003cspan style=\"color:#75715e\"\u003e# Imputaci√≥n de la base de datos 1, los 13 items\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ematrices \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elist\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e (i \u003cspan style=\"color:#66d9ef\"\u003ein\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  data \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecomplete\u003c/span\u003e(imp, action \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e i)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cov_matrix \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecov\u003c/span\u003e(data)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  matrices[[i]] \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e cov_matrix\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehead\u003c/span\u003e(matrices)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Ahora promedio las matrices de covarianza\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaverage_cov_matrix \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eReduce\u003c/span\u003e(`+`, matrices) \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elength\u003c/span\u003e(matrices)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e################Recuperaci√≥n de la matriz (matriz residual)###################\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#raw_m[upper.tri(raw_m)] \u0026lt;- 0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#raw_m\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#average_cov_matrix[upper.tri(average_cov_matrix)] \u0026lt;- 0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#average_cov_matrix\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#m_dif \u0026lt;- raw_m-average_cov_matrix  #(residuos muy bajos,la imputacion recupera bien)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#m_dif\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e###############################################################################\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Definiendo el modelo de CFA\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emodelo \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  factor1 =~ p1 + p2 + p8 + p5 + p12\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  factor2 =~ p4 + p7 + p10 + p11\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  factor3 =~ p6 + p13\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  factor1 ~~ factor2\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  factor1 ~~ factor3\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  factor2 ~~ factor3\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Realizando el CFA con la matriz de covarianza promediada\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eafc \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecfa\u003c/span\u003e(modelo, sample.cov \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e average_cov_matrix, sample.nobs \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e96\u003c/span\u003e, std.lv \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e, meanstructure \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e, estimator \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ML\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003esummary\u003c/span\u003e(afc, standardized\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e, fit.measures\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ecoef\u003c/span\u003e(afc)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003esemPaths\u003c/span\u003e(afc,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;std\u0026#34;\u003c/span\u003e,edge.label.cex\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e0.5\u003c/span\u003e, curvePivot \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e############## Realizamos tambi√©n el CFA con los datos brutos (sin simular datos MCAR) e introduciendo como input la matriz de varianzas-covarianzas##################\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eraw_datos \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eread_sav\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Liderazgo.sav\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estr\u003c/span\u003e(raw_datos)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#eliminamos variables innecesarias y las que no estan incluidas en el modelo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eraw_datos \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e raw_datos[,\u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e14\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e15\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e)]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehead\u003c/span\u003e(raw_datos)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ematriz \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecov\u003c/span\u003e(raw_datos)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ematriz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#CFA \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eraw_modelo \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  factor1=~p1+p2+p8+p5+p12\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  factor2=~p4+p7+p10+p11\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  factor3=~p6+p13\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  factor1~~factor2\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  factor1~~factor3\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  factor2~~factor3\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eraw_afc \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecfa\u003c/span\u003e(raw_modelo, sample.cov \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e matriz, sample.nobs \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e96\u003c/span\u003e, std.lv \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e, meanstructure \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e, estimator \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ML\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003esummary\u003c/span\u003e(raw_afc, standardized\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e, fit.measures\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ecoef\u003c/span\u003e(raw_afc)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003esemPaths\u003c/span\u003e(raw_afc,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;std\u0026#34;\u003c/span\u003e,edge.label.cex\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e0.5\u003c/span\u003e, curvePivot \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","description":"Estudio de la Recuperaci√≥n de un An√°lisis Factorial Confirmatorio sobre una matriz de varianzas y covarianzas cuyos datos presentaban valores perdidos.","image":null,"permalink":"http://localhost:1313/proyectos/valores_perdidos/","title":"Estudio de Valores Perdidos en R"},{"content":"\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2 id=\"√°rbol-de-decisi√≥n-y-bosques-aleatorios\"\u003e√Årbol de Decisi√≥n y Bosques Aleatorios\u003c/h2\u003e\n\u003cbr\u003e\r\n\u003ch3 id=\"introducci√≥n\"\u003eIntroducci√≥n\u003c/h3\u003e\n\u003cp\u003eLa base de datos que emplearemos es una base de datos que recoge informaci√≥n de 200 personas, en concreto, se recoge informaci√≥n sobre su Edad, Sexo, Presi√≥n en Sangre, Niveles de Colesterol, Niveles de Sodio y Potasio y droga/medicaci√≥n que se le receta. Queremos realizar un √°rbol aleatorio que tenga en cuenta todas estas variables y sea capaz de predecir qu√© droga/medicaci√≥n debemos recetar a cada paciente.\u003c/p\u003e\n\u003cp\u003eEn primer lugar vamos a realizar una reestructuraci√≥n de los datos y despu√©s un breve An√°lisis Exploratorio, para ver qu√© tipo de datos tenemos, cuantas categor√≠as, valores perdidos, etc. Aunque ya adelantamos que no hay valores perdidos y que las variables cuantitativas son dad y Sodio-Potasio y el resto son categ√≥ricas.\u003c/p\u003e\n\u003cbr\u003e\r\n\u003ch3 id=\"√°rbol-de-decisi√≥n\"\u003e√Årbol de Decisi√≥n\u003c/h3\u003e\n\u003cbr\u003e\r\n\u003cdiv style=\"display:flex; justify-content:center; gap:30px; align-items:center;\"\u003e\r\n  \u003cfigure style=\"margin:0; width:360px; text-align:center;\"\u003e\r\n    \u003cimg src=\"/accuracy_tree.png\" alt=\"M√©tricas de Evaluaci√≥n del √Årbol de Decisi√≥n\" width=\"360\"\u003e\r\n    \u003cfigcaption style=\"font-style:italic; margin-top:8px;\"\u003e\r\n      Figura 1. M√©tricas de Evaluaci√≥n del √Årbol de Decisi√≥n.\r\n    \u003c/figcaption\u003e\r\n  \u003c/figure\u003e\r\n\u003c/div\u003e\r\n\u003cbr\u003e\r\n\u003cp\u003eComo podemos ver el \u003cem\u003eaccuracy\u003c/em\u003e del √Årbol de Decisi√≥n es de 0.98 y su matriz de confusi√≥n es ideal (solo 1 caso no es clasificado correctamente). Con √©l, podr√≠amos utilizarlo para predecir un caso nuevo que no existiera ni en el conjunto de entrenamiento ni el conjunto de test como se hace en el siguiente bloque de c√≥digo:\n\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eX \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e np\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003earray([\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;20\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Male\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;LOW\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;LOW\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;10\u0026#39;\u003c/span\u003e])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elabel \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e LabelEncoder()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eX \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e label\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efit_transform(X)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ey_pred \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e clf\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epredict(X\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ereshape(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ey_pred\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003ePero el √Årbol de Decisi√≥n adolece de un problema que los Bosques Aleatorios no tienen: \u003cstrong\u003eson poco generalizables\u003c/strong\u003e. Los Bosques Aleatorios al implementar m√∫ltiples √°rboles, permiten una clasificaci√≥n m√°s robusta y confiable.\n\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch3 id=\"bosques-aleatorios\"\u003eBosques Aleatorios\u003c/h3\u003e\n\u003ch3 id=\"anexo-1-script-√°rboles-y-bosques-aleatorios\"\u003eAnexo 1: \u003cem\u003eScript √Årboles y Bosques Aleatorios\u003c/em\u003e\u003c/h3\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n","description":"Una serie de proyectos de clasificaci√≥n con t√©cnicas de Machine Learning Supervisado","image":null,"permalink":"http://localhost:1313/proyectos/ml_supervised/","title":"Machine Learning Supervisado"},{"content":"","description":"Algoritmo Gen√©tico que pretende resolver el problema del viajante (TSP) desde dos l√≥gicas diferentes.","image":null,"permalink":"http://localhost:1313/proyectos/algoritmo_genetico/","title":"Algoritmo Gen√©tico"},{"content":"","description":"Incremento en las ventas de 'SanoyFresco' al crear un recomendador online basado en la t√©cnica 'Market Basket Analysis'","image":null,"permalink":"http://localhost:1313/proyectos/ecommerce/","title":"An√°lisis de Ventas Ecommerce"},{"content":"","description":"Una serie de proyectos de clustering y reducci√≥n de dimensionalidad.","image":null,"permalink":"http://localhost:1313/proyectos/ml_unsupervised/","title":"Machine Learning No Supervisado"},{"content":"","description":"An√°lisis y modelado de texto con t√©cnicas de NLP, incluyendo tokenizaci√≥n, lematizaci√≥n y modelos de clasificaci√≥n de texto usando NLTK y spaCy.","image":null,"permalink":"http://localhost:1313/proyectos/nlp_reviews/","title":"Procesamiento de Lenguaje Natural"},{"content":"","description":"Una serie de proyectos de simulaci√≥n relacionados con la estad√≠stica.","image":null,"permalink":"http://localhost:1313/proyectos/simulacion/","title":"Simulaci√≥n Estad√≠stica"}]